/*
 * This file is generated by Entity Class Compiler, (c) CroTeam 1997-98
 */

#line 17 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"

#include "Entities/StdH/StdH.h"

#include <Entities/WorldSettingsController.h>
#include <Entities/WorldSettingsController_tables.h>
void CWorldSettingsController::SetDefaultProperties(void) {
  m_tmStormStart = -1.0f;
  m_strName = "World settings controller";
  m_tmLightningStart = -1.0f;
  m_fLightningPower = 1.0f;
  m_tmStormEnd = -1.0f;
  m_tmPyramidPlatesStart = 1e6;
  m_tmActivatedPlate1 = 1e6;
  m_tmDeactivatedPlate1 = 1e6;
  m_tmActivatedPlate2 = 1e6;
  m_tmDeactivatedPlate2 = 1e6;
  m_tmActivatedPlate3 = 1e6;
  m_tmDeactivatedPlate3 = 1e6;
  m_tmActivatedPlate4 = 1e6;
  m_tmDeactivatedPlate4 = 1e6;
  m_tmPyramidMorphRoomActivated = 1e6;
  m_tmShakeStarted = -1.0f;
  m_vShakePos = FLOAT3D(0 , 0 , 0);
  m_fShakeFalloff = 100.0f;
  m_fShakeFade = 1.0f;
  m_fShakeIntensityY = 1.0f;
  m_tmShakeFrequencyY = 1.0f;
  m_fShakeIntensityB = 1.0f;
  m_tmShakeFrequencyB = 1.0f;
  m_fShakeIntensityZ = 1.0f;
  m_tmShakeFrequencyZ = 1.0f;
  m_fnHeightMap = CTString("");
  m_moHeightMapHolder.SetData(NULL);
m_moHeightMapHolder.mo_toTexture.SetData(NULL);
  m_boxHeightMap = FLOATaabbox3D(FLOAT3D (0 , 0 , 0) , FLOAT3D (1 , 1 , 1));
  m_tmGlaringStarted = -1.0f;
  m_tmGlaringEnded = -1.0f;
  m_fGlaringFadeInRatio = 0.1f;
  m_fGlaringFadeOutRatio = 0.1f;
  CEntity::SetDefaultProperties();
}
  
#line 68 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
void CWorldSettingsController::Precache(void) 
#line 69 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
{
#line 70 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
CTextureData  * ptdHeightMap  = (CTextureData  *) m_moHeightMapHolder  . mo_toTexture  . GetData  ();
#line 71 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
if(ptdHeightMap  != NULL )
#line 72 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
{
#line 73 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
ptdHeightMap  -> Force  (TEX_STATIC );
#line 74 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
}
#line 75 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
}
  
#line 77 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
FLOAT CWorldSettingsController::GetStormFactor(void) 
#line 78 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
{
#line 79 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
FLOAT fStormFactor  = 0.0f;
#line 80 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
FLOAT fStormAppearLen  = 10.0f;
#line 81 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
TIME  tmNow  = _pTimer  -> GetLerpedCurrentTick  ();
#line 83 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
if(tmNow  > m_tmStormStart  && tmNow  < m_tmStormEnd  + fStormAppearLen )
#line 84 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
{
#line 86 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
if(tmNow  > m_tmStormStart  + fStormAppearLen  && tmNow  < m_tmStormEnd )
#line 87 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
{
#line 88 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
fStormFactor  = 1.0f;
#line 89 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
}
#line 91 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
else if(tmNow  > m_tmStormEnd )
#line 92 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
{
#line 93 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
fStormFactor  = 1.0f - (tmNow  - m_tmStormEnd ) / fStormAppearLen ;
#line 94 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
}
#line 96 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
else 
#line 97 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
{
#line 98 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
fStormFactor  = (tmNow  - m_tmStormStart ) / fStormAppearLen ;
#line 99 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
}
#line 100 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
}
#line 101 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
return fStormFactor ;
#line 102 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
}
  
#line 104 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
void CWorldSettingsController::GetHeightMapData(CTextureData * & ptdHeightMap,FLOATaabbox3D & boxHeightMap) 
#line 105 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
{
#line 106 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
ptdHeightMap  = (CTextureData  *) m_moHeightMapHolder  . mo_toTexture  . GetData  ();
#line 107 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
boxHeightMap  = m_boxHeightMap ;
#line 108 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
}
BOOL CWorldSettingsController::
#line 111 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
Main(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CWorldSettingsController_Main
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EVoid, "CWorldSettingsController::Main expects 'EVoid' as input!");  const EVoid &e = (const EVoid &)__eeInput;
#line 114 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
InitAsEditorModel  ();
#line 115 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
SetPhysicsFlags  (EPF_MODEL_IMMATERIAL );
#line 116 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
SetCollisionFlags  (ECF_IMMATERIAL );
#line 119 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
if(m_fnHeightMap  != CTString (""))
#line 120 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
{
#line 121 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
try 
#line 122 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
{
#line 123 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
m_moHeightMapHolder  . mo_toTexture  . SetData_t  (m_fnHeightMap );
#line 124 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
}catch  (const char  * strError ){
#line 125 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
WarningMessage  (strError );
#line 126 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
}
#line 127 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
}
#line 130 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
SetModel  (MODEL_WORLD_SETTINGS_CONTROLLER );
#line 131 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
SetModelMainTexture  (TEXTURE_WORLD_SETTINGS_CONTROLLER );
#line 133 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
m_tmStormStart  = 1e5 - 1.0f;
#line 134 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
m_tmStormEnd  = 1e5;
#line 137 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
Return(STATE_CURRENT,EVoid());
#line 137 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/WorldSettingsController.es"
return TRUE; ASSERT(FALSE); return TRUE;};