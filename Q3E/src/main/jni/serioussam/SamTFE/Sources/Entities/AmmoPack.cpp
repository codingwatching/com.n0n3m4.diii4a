/*
 * This file is generated by Entity Class Compiler, (c) CroTeam 1997-98
 */

#line 17 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"

#include "Entities/StdH/StdH.h"
#include "Models/Items/ItemHolder/ItemHolder.h"

#include <Entities/AmmoPack.h>
#include <Entities/AmmoPack_tables.h>
CEntityEvent *EAmmoPackItem::MakeCopy(void) { CEntityEvent *peeCopy = new EAmmoPackItem(*this); return peeCopy;}
EAmmoPackItem::EAmmoPackItem() : CEntityEvent(EVENTCODE_EAmmoPackItem) {;
 ClearToDefault(iShells);
 ClearToDefault(iBullets);
 ClearToDefault(iRockets);
 ClearToDefault(iGrenades);
 ClearToDefault(iElectricity);
 ClearToDefault(iIronBalls);
};
void CAmmoPack::SetDefaultProperties(void) {
  m_aptPackType = APT_CUSTOM ;
  m_iShells = MAX_SHELLS ;
  m_iBullets = MAX_BULLETS ;
  m_iRockets = MAX_ROCKETS ;
  m_iGrenades = MAX_GRENADES ;
  m_iElectricity = MAX_ELECTRICITY ;
  m_iIronBalls = MAX_IRONBALLS ;
  CItem::SetDefaultProperties();
}
  
#line 77 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
void CAmmoPack::Precache(void) {
#line 78 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
PrecacheSound  (SOUND_PICK );
#line 79 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
}
  
#line 82 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
void CAmmoPack::RenderParticles(void) 
#line 83 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
{
#line 85 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
if(GetRenderType  () != CEntity  :: RT_MODEL  || GetSP  () -> sp_gmGameMode  > CSessionProperties  :: GM_COOPERATIVE  
#line 86 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
|| ! ShowItemParticles  ())
#line 87 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
{
#line 88 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
return ;
#line 89 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
}
#line 91 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
Particles_Spiral  (this  , 3.0f * 0.5 , 2.5f * 0.5 , PT_STAR04  , 10);
#line 92 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
}
  
#line 95 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
BOOL CAmmoPack::FillEntityStatistics(EntityStats * pes) 
#line 96 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
{
#line 97 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
pes  -> es_ctCount  = 1;
#line 98 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
pes  -> es_ctAmmount  = 1;
#line 102 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
pes  -> es_strName  . PrintF  ("Back pack: %d Shells, %d Bullets, %d Rockets, %d Grenades, %d Electricity, %d Iron balls" , 
#line 103 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
m_iShells  , m_iBullets  , m_iRockets  , m_iGrenades  , m_iElectricity  , m_iIronBalls );
#line 106 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
pes  -> es_fValue  = 
#line 107 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
m_iShells  * AV_SHELLS  + 
#line 108 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
m_iBullets  * AV_BULLETS  + 
#line 109 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
m_iRockets  * AV_ROCKETS  + 
#line 110 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
m_iGrenades  * AV_GRENADES  + 
#line 112 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
m_iElectricity  * AV_ELECTRICITY  + 
#line 113 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
m_iIronBalls  * AV_IRONBALLS 
#line 114 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
;
#line 116 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
pes  -> es_iScore  = 0;
#line 117 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
return TRUE ;
#line 118 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
}
  
#line 121 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
void CAmmoPack::SetProperties(void) 
#line 122 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
{
#line 123 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
switch(m_aptPackType )
#line 124 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
{
#line 125 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
case APT_SERIOUS : 
#line 126 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
m_strDescription  = "Serious:";
#line 128 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
AddItem  (MODEL_SERIOUSPACK  , TEXTURE_SERIOUSPACK  , 0 , 0 , 0);
#line 129 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
AddFlare  (MODEL_FLARE  , TEXTURE_FLARE  , FLOAT3D (0 , 0.75f , 0) , FLOAT3D (2 , 2 , 1.3f));
#line 130 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
StretchItem  (FLOAT3D (0.5f , 0.5f , 0.5f));
#line 131 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
break ;
#line 132 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
case APT_CUSTOM : 
#line 133 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
m_strDescription  = "Custom:";
#line 135 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
AddItem  (MODEL_BACKPACK  , TEXTURE_BACKPACK  , 0 , 0 , 0);
#line 136 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
AddFlare  (MODEL_FLARE  , TEXTURE_FLARE  , FLOAT3D (0 , 0.75f , 0) , FLOAT3D (2 , 2 , 1.3f));
#line 137 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
StretchItem  (FLOAT3D (0.5f , 0.5f , 0.5f));
#line 138 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
break ;
#line 139 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
default  : ASSERTALWAYS  ("Uknown ammo");
#line 140 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
}
#line 142 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
m_fValue  = 1.0f;
#line 143 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
m_fRespawnTime  = 30.0f;
#line 144 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
if(m_iShells  != 0){m_strDescription  . PrintF  ("%s: Shells (%d)" , (const char  *) m_strDescription  , m_iShells );}
#line 145 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
if(m_iBullets  != 0){m_strDescription  . PrintF  ("%s: Bullets (%d)" , (const char  *) m_strDescription  , m_iBullets );}
#line 146 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
if(m_iRockets  != 0){m_strDescription  . PrintF  ("%s: Rockets (%d)" , (const char  *) m_strDescription  , m_iRockets );}
#line 147 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
if(m_iGrenades  != 0){m_strDescription  . PrintF  ("%s: Grenades (%d)" , (const char  *) m_strDescription  , m_iGrenades );}
#line 149 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
if(m_iElectricity  != 0){m_strDescription  . PrintF  ("%s: Electricity (%d)" , (const char  *) m_strDescription  , m_iElectricity );}
#line 150 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
if(m_iIronBalls  != 0){m_strDescription  . PrintF  ("%s: Iron balls (%d)" , (const char  *) m_strDescription  , m_iIronBalls );}
#line 152 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
}
  
#line 154 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
void CAmmoPack::AdjustDifficulty(void) 
#line 155 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
{
#line 158 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
if(GetSP  () -> sp_bInfiniteAmmo  && m_penTarget  == NULL ){
#line 159 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
Destroy  ();
#line 160 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
}
#line 161 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
}
BOOL CAmmoPack::
#line 164 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
ItemCollected(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CAmmoPack_ItemCollected
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EPass, "CAmmoPack::ItemCollected expects 'EPass' as input!");  const EPass &epass = (const EPass &)__eeInput;
#line 166 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
ASSERT  (epass  . penOther  != NULL );
#line 169 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
if(GetSP  () -> sp_bAmmoStays  && ! m_bPickupOnce ){
#line 171 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
BOOL bWasPicked  = MarkPickedBy  (epass  . penOther );
#line 172 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
if(bWasPicked ){
#line 174 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
Return(STATE_CURRENT,EVoid());
#line 174 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
return TRUE;
#line 175 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
}
#line 176 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
}
#line 179 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
EAmmoPackItem  eAmmo ;
#line 180 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
eAmmo  . iShells  = m_iShells ;
#line 181 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
eAmmo  . iBullets  = m_iBullets ;
#line 182 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
eAmmo  . iRockets  = m_iRockets ;
#line 183 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
eAmmo  . iGrenades  = m_iGrenades ;
#line 185 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
eAmmo  . iElectricity  = m_iElectricity ;
#line 186 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
eAmmo  . iIronBalls  = m_iIronBalls ;
#line 189 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
if(epass  . penOther  -> ReceiveItem  (eAmmo )){
#line 191 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
m_soPick  . Set3DParameters  (50.0f , 1.0f , 1.0f , 1.0f);
#line 192 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
PlaySound  (m_soPick  , SOUND_PICK  , SOF_3D );
#line 193 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
m_fPickSoundLen  = GetSoundLength  (SOUND_PICK );
#line 194 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
if(! GetSP  () -> sp_bAmmoStays  || m_bPickupOnce ){
#line 195 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
Jump(STATE_CURRENT, STATE_CItem_ItemReceived, FALSE, EVoid());return TRUE;
#line 196 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
}
#line 197 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
}
#line 198 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
Return(STATE_CURRENT,EVoid());
#line 198 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
return TRUE; ASSERT(FALSE); return TRUE;};BOOL CAmmoPack::
#line 201 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
Main(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CAmmoPack_Main
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EVoid, "CAmmoPack::Main expects 'EVoid' as input!");  const EVoid &e = (const EVoid &)__eeInput;
#line 202 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
m_iShells  = Clamp  (m_iShells  , INDEX (0) , MAX_SHELLS );
#line 203 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
m_iBullets  = Clamp  (m_iBullets  , INDEX (0) , MAX_BULLETS );
#line 204 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
m_iRockets  = Clamp  (m_iRockets  , INDEX (0) , MAX_ROCKETS );
#line 205 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
m_iGrenades  = Clamp  (m_iGrenades  , INDEX (0) , MAX_GRENADES );
#line 207 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
m_iElectricity  = Clamp  (m_iElectricity  , INDEX (0) , MAX_ELECTRICITY );
#line 208 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
m_iIronBalls  = Clamp  (m_iIronBalls  , INDEX (0) , MAX_IRONBALLS );
#line 211 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
Initialize  ();
#line 212 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
StartModelAnim  (ITEMHOLDER_ANIM_MEDIUMOSCILATION  , AOF_LOOPING  | AOF_NORESTART );
#line 213 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
ForceCollisionBoxIndexChange  (ITEMHOLDER_COLLISION_BOX_MEDIUM );
#line 214 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
SetProperties  ();
#line 216 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/AmmoPack.es"
Jump(STATE_CURRENT, STATE_CItem_ItemLoop, FALSE, EVoid());return TRUE; ASSERT(FALSE); return TRUE;};