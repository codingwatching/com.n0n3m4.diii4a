/*
 * This file is generated by Entity Class Compiler, (c) CroTeam 1997-98
 */

#line 17 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"

#include "Entities/StdH/StdH.h"

#include <Entities/FogMarker.h>
#include <Entities/FogMarker_tables.h>
void CFogMarker::SetDefaultProperties(void) {
  m_fDepth = 10.0f;
  m_fAbove = 20.0f;
  m_fBelow = 20.0f;
  m_fFar = 100.0f;
  m_faType = FA_EXP ;
  m_fDensity = 0.1f;
  m_fgType = FG_CONSTANT ;
  m_fGraduation = 0.1f;
  m_bDensityDirect = TRUE ;
  m_fDensityPercentage = 0.95f;
  m_fDensityDistance = 10.0f;
  m_bGraduationDirect = TRUE ;
  m_fGraduationPercentage = 0.95f;
  m_fGraduationDistance = 10.0f;
  m_iSizeL = 32;
  m_iSizeH = 16;
  m_colColor = (C_WHITE  | CT_OPAQUE );
  CMarker::SetDefaultProperties();
}
  
#line 71 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
const CTString & CFogMarker::GetFogName(void) 
#line 72 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
{
#line 73 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
return m_strName ;
#line 74 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
}
  
#line 76 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
void CFogMarker::GetFog(class CFogParameters & fpFog) 
#line 77 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
{
#line 78 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
const FLOATmatrix3D & m  = GetRotationMatrix  ();
#line 79 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
fpFog  . fp_vFogDir  (1) = m  (1 , 2);
#line 80 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
fpFog  . fp_vFogDir  (2) = m  (2 , 2);
#line 81 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
fpFog  . fp_vFogDir  (3) = m  (3 , 2);
#line 82 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
FLOAT fPos  = fpFog  . fp_vFogDir  % GetPlacement  () . pl_PositionVector ;
#line 83 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
fpFog  . fp_colColor  = m_colColor ;
#line 84 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
fpFog  . fp_atType  = (AttenuationType ) m_faType ;
#line 85 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
fpFog  . fp_fDensity  = m_fDensity ;
#line 86 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
fpFog  . fp_fgtType  = (FogGraduationType ) m_fgType ;
#line 87 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
fpFog  . fp_fGraduation  = m_fGraduation ;
#line 88 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
fpFog  . fp_fH0  = fPos  - m_fDepth  - m_fBelow ;
#line 89 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
fpFog  . fp_fH1  = fPos  - m_fDepth ;
#line 90 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
fpFog  . fp_fH2  = fPos ;
#line 91 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
fpFog  . fp_fH3  = fPos  + m_fAbove ;
#line 92 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
fpFog  . fp_fFar  = m_fFar ;
#line 93 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
fpFog  . fp_iSizeH  = m_iSizeH ;
#line 94 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
fpFog  . fp_iSizeL  = m_iSizeL ;
#line 95 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
}
BOOL CFogMarker::
#line 97 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
Main(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CFogMarker_Main
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EVoid, "CFogMarker::Main expects 'EVoid' as input!");  const EVoid &e = (const EVoid &)__eeInput;
#line 99 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
InitAsEditorModel  ();
#line 100 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
SetPhysicsFlags  (EPF_MODEL_IMMATERIAL );
#line 101 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
SetCollisionFlags  (ECF_IMMATERIAL );
#line 104 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
SetModel  (MODEL_MARKER );
#line 105 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
SetModelMainTexture  (TEXTURE_MARKER );
#line 108 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
if(m_strName  == "Marker"){
#line 109 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
m_strName  = "Fog marker";
#line 110 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
}
#line 113 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
if(! m_bDensityDirect ){
#line 115 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
switch(m_faType ){
#line 116 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
case FA_LINEAR : 
#line 117 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
m_fDensity  = m_fDensityPercentage  / m_fDensityDistance ;
#line 118 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
break ;
#line 119 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
case FA_EXP : 
#line 120 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
m_fDensity  = - log  (1 - m_fDensityPercentage ) / m_fDensityDistance ;
#line 121 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
break ;
#line 122 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
case FA_EXP2 : 
#line 123 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
m_fDensity  = Sqrt  (- log  (1 - m_fDensityPercentage )) / m_fDensityDistance ;
#line 124 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
break ;
#line 125 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
}
#line 126 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
}
#line 129 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
if(! m_bGraduationDirect ){
#line 131 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
switch(m_fgType ){
#line 132 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
case FG_LINEAR : 
#line 133 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
m_fGraduation  = m_fGraduationPercentage  / m_fGraduationDistance ;
#line 134 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
break ;
#line 135 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
case FG_EXP : 
#line 136 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
m_fGraduation  = - log  (1 - m_fGraduationPercentage ) / m_fGraduationDistance ;
#line 137 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
break ;
#line 138 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
}
#line 139 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
}
#line 143 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
m_fDensity  = ClampDn  (m_fDensity  , 1E-6f);
#line 145 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
m_fDepth  = ClampDn  (m_fDepth  , 0.001f);
#line 146 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
m_fAbove  = ClampDn  (m_fAbove  , 0.001f);
#line 147 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
m_fBelow  = ClampDn  (m_fBelow  , 0.001f);
#line 148 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
m_fFar  = ClampDn  (m_fFar  , 0.001f);
#line 150 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
m_iSizeL  = 1 << INDEX (Log2  (m_iSizeL ));
#line 151 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
m_iSizeH  = 1 << INDEX (Log2  (m_iSizeH ));
#line 152 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
m_iSizeL  = Clamp  (m_iSizeL  , INDEX (2) , INDEX (256));
#line 153 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
m_iSizeH  = Clamp  (m_iSizeH  , INDEX (2) , INDEX (256));
#line 155 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
Return(STATE_CURRENT,EVoid());
#line 155 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTFE/Sources/Entities/FogMarker.es"
return TRUE; ASSERT(FALSE); return TRUE;};