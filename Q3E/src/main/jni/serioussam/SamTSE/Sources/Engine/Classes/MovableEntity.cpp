/*
 * This file is generated by Entity Class Compiler, (c) CroTeam 1997-98
 */

#line 20 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"

#include <Engine/StdH.h>
#include <Engine/Entities/InternalClasses.h>
#include <Engine/World/PhysicsProfile.h>
#include <Engine/Math/Geometry.inl>
#include <Engine/Math/Float.h>
#include <Engine/Base/Stream.h>
#include <Engine/World/World.h>
#include <Engine/Network/Network.h>
#include <Engine/Entities/EntityCollision.h>
#include <Engine/Templates/StaticArray.cpp>
#include <Engine/Templates/BSP.h>
#include <Engine/Base/ListIterator.inl>
#include <Engine/World/WorldSettings.h>
#include <Engine/World/WorldCollision.h>
#include <Engine/Math/Clipping.inl>
#include <Engine/Light/LightSource.h>
#include <Engine/Entities/LastPositions.h>
#include <Engine/Templates/StaticStackArray.cpp>
#include <Engine/Templates/DynamicArray.cpp>
#include <Engine/Base/Console.h>
#include <Engine/Base/CRC.h>
#include <Engine/Network/SessionState.h>
#include <Engine/Terrain/TerrainMisc.h>
#define CLEARMEM(var) memset(&var, 0, sizeof(var))


#include <Engine/Classes/MovableEntity.h>
#include <Engine/Classes/MovableEntity_tables.h>
#line 49 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"


#define ANYEXCEPTION  ...
template class CStaticStackArray<CBrushPolygon*>;

#define MAXCOLLISIONRETRIES 4*4
extern FLOAT phy_fCollisionCacheAhead;
extern FLOAT phy_fCollisionCacheAround;
extern FLOAT cli_fPredictionFilter;

// force breakpoint (debug)
extern INDEX dbg_bBreak;
// must be in separate function to disable stupid optimizer
extern void Breakpoint(void); 

CEntity *GetPredictedSafe(CEntity *pen)
{
  if ((pen->en_ulFlags&(ENF_PREDICTOR|ENF_TEMPPREDICTOR)) == ENF_PREDICTOR) {
    return pen->GetPredicted();
  } else {
    return pen;
  }
}

// add acceleration to velocity
static inline void AddAcceleration(
  FLOAT3D &vCurrentVelocity, const FLOAT3D &vDesiredVelocity, 
  FLOAT fAcceleration, FLOAT fDecceleration)
{
  // if desired velocity is smaller than current velocity
  if (vDesiredVelocity.Length()<vCurrentVelocity.Length()) {
    fAcceleration=fDecceleration;
  }
  // find difference between current and desired velocities
  FLOAT3D vDelta = vDesiredVelocity-vCurrentVelocity;
  // accelerate in the direction of the difference with given maximum acceleration
  FLOAT fDelta = vDelta.Length();
  if (fDelta>fAcceleration) {
    vCurrentVelocity += vDelta*(fAcceleration/fDelta);
  } else {
    vCurrentVelocity = vDesiredVelocity;
  }
}

// add gravity acceleration to velocity along an axis
static inline void AddGAcceleration(
  FLOAT3D &vCurrentVelocity, const FLOAT3D &vGDir, 
  FLOAT fGA, FLOAT fGV)
{
  // disassemble speed
  FLOAT3D vCurrentParallel, vCurrentOrthogonal;
  GetParallelAndNormalComponents(vCurrentVelocity, vGDir, vCurrentOrthogonal, vCurrentParallel);

/* 
IMPORTANT:
This is how this piece of code should look like:

  // if not already going down at max speed
  if (! (vCurrentOrthogonal%vGDir>=fGV)) {
    // add accelleration to parallel speed
    vCurrentOrthogonal+=vGDir*fGA;

    // if going down at max speed
    if (vCurrentOrthogonal%vGDir>=fGV) {
      // clamp
      vCurrentOrthogonal = vGDir*fGV;
    }
  }

But, due to need for compatibility with older versions and bad VC code generator, we use this kludge:
  */
  
// KLUDGE_BEGIN

  if (_pNetwork->ga_ulDemoMinorVersion<=2) {
    Swap(vCurrentOrthogonal, vCurrentParallel);
  }

  FLOAT3D vCurrentOrthogonalOrg=vCurrentOrthogonal;
  // add accelleration to parallel speed
  vCurrentOrthogonal+=vGDir*fGA;

  // if going down at max speed
  if (vCurrentOrthogonal%vGDir>=fGV) {
    // clamp
    vCurrentOrthogonal = vGDir*fGV;
  } else {
    vCurrentOrthogonalOrg = vCurrentOrthogonal;
  }

  if (_pNetwork->ga_ulDemoMinorVersion>2) {
    vCurrentOrthogonal=vCurrentOrthogonalOrg;
  }
// KLUDGE_END

  // assemble speed back
  vCurrentVelocity = vCurrentParallel+vCurrentOrthogonal;
}

// NOTE:
// this is pulled out into a separate function because, otherwise, VC6 generates
// invalid code when optimizing this. no clue why is that so.

#pragma inline_depth(0)
static void CheckAndAddGAcceleration(CMovableEntity *pen, FLOAT3D &vTranslationAbsolute, FLOAT fTickQuantum)
{
  // if there is forcefield involved
  if (pen->en_fForceA>0.01f) {
    // add force acceleration
    FLOAT fGV=pen->en_fForceV*fTickQuantum;
    FLOAT fGA=pen->en_fForceA*fTickQuantum*fTickQuantum;
    AddGAcceleration(vTranslationAbsolute, pen->en_vForceDir, fGA, fGV);
  }
}
#pragma inline_depth()  // see important note above


// add acceleration to velocity, but only along a plane
static inline void AddAccelerationOnPlane(
  FLOAT3D &vCurrentVelocity, const FLOAT3D &vDesiredVelocity, 
  FLOAT fAcceleration, FLOAT fDecceleration,
  const FLOAT3D &vPlaneNormal)
{
  FLOAT3D vCurrentParallel, vCurrentOrthogonal;
  GetParallelAndNormalComponents(vCurrentVelocity, vPlaneNormal, vCurrentOrthogonal, vCurrentParallel);
  FLOAT3D vDesiredParallel;
  GetNormalComponent(vDesiredVelocity, vPlaneNormal, vDesiredParallel);
  AddAcceleration(vCurrentParallel, vDesiredParallel, fAcceleration, fDecceleration);
  vCurrentVelocity = vCurrentParallel+vCurrentOrthogonal;
}

// add acceleration to velocity, for roller-coaster slope -- slow!
static inline void AddAccelerationOnPlane2(
  FLOAT3D &vCurrentVelocity, const FLOAT3D &vDesiredVelocity, 
  FLOAT fAcceleration, FLOAT fDecceleration,
  const FLOAT3D &vPlaneNormal, const FLOAT3D &vGravity)
{
  // get down and horizontal direction
  FLOAT3D vDn;
  GetNormalComponent(vGravity, vPlaneNormal, vDn);
  vDn.Normalize();
  FLOAT3D vRt = vPlaneNormal*vDn;
  vRt.Normalize();

  // add only horizontal acceleration
  FLOAT3D vCurrentParallel, vCurrentOrthogonal;
  GetParallelAndNormalComponents(vCurrentVelocity, vRt, vCurrentParallel, vCurrentOrthogonal);
  FLOAT3D vDesiredParallel;
  GetParallelComponent(vDesiredVelocity, vRt, vDesiredParallel);
  AddAcceleration(vCurrentParallel, vDesiredParallel, fAcceleration, fDecceleration);
  vCurrentVelocity = vCurrentParallel+vCurrentOrthogonal;
}

// max number of retries during movement
static INDEX _ctTryToMoveCheckCounter;
static INDEX _ctSliding;
static FLOAT3D _vSlideOffDir;   // move away direction for sliding
static FLOAT3D _vSlideDir;
static void InitTryToMove(void)
{
  _ctTryToMoveCheckCounter = MAXCOLLISIONRETRIES;
  _ctSliding = 0;
  _vSlideOffDir = FLOAT3D(0,0,0);
  _vSlideDir = FLOAT3D(0,0,0);
}

// array of forces for current entity
class CEntityForce {
public:
  CEntityPointer ef_penEntity;
  INDEX ef_iForceType;
  FLOAT ef_fRatio;    // how much of entity this force gets [0-1]
  inline void Clear(void) {
    ef_penEntity = NULL;
  };
  ~CEntityForce(void) {
    Clear();
  };
};
static CStaticStackArray<CEntityForce> _aefForces;

void ClearMovableEntityCaches(void)
{
  _aefForces.Clear();
}


void CMovableEntity::SetDefaultProperties(void) {
  en_vDesiredTranslationRelative = FLOAT3D(0.0f , 0.0f , 0.0f);
  en_aDesiredRotationRelative = ANGLE3D(0 , 0 , 0);
  en_vCurrentTranslationAbsolute = FLOAT3D(0.0f , 0.0f , 0.0f);
  en_aCurrentRotationAbsolute = ANGLE3D(0 , 0 , 0);
  en_penReference = NULL;
  en_vReferencePlane = FLOAT3D(0.0f , 0.0f , 0.0f);
  en_iReferenceSurface = 0;
  en_penLastValidReference = NULL;
  en_tmLastSignificantVerticalMovement = 0.0f;
  en_tmLastBreathed = 0;
  en_tmMaxHoldBreath = 5.0f;
  en_fDensity = 5000.0f;
  en_tmLastSwimDamage = 0;
  en_iUpContent = 0;
  en_iDnContent = 0;
  en_fImmersionFactor = 1.0f;
  en_vGravityDir = FLOAT3D(0 , - 1 , 0);
  en_fGravityA = 0.0f;
  en_fGravityV = 0.0f;
  en_vForceDir = FLOAT3D(1 , 0 , 0);
  en_fForceA = 0.0f;
  en_fForceV = 0.0f;
  en_tmJumped = 0;
  en_tmMaxJumpControl = 0.5f;
  en_fJumpControlMultiplier = 0.5f;
  en_fAcceleration = 200.0f;
  en_fDeceleration = 40.0f;
  en_fStepUpHeight = 1.0f;
  en_fStepDnHeight = -1.0f;
  en_fBounceDampParallel = 0.5f;
  en_fBounceDampNormal = 0.5f;
  en_fCollisionSpeedLimit = 20.0f;
  en_fCollisionDamageFactor = 20.0f;
  en_boxMovingEstimate = FLOATaabbox3D(FLOAT3D (0 , 0 , 0) , 0.01f);
  en_boxNearCached = FLOATaabbox3D(FLOAT3D (0 , 0 , 0) , 0.01f);
  en_vIntendedTranslation = FLOAT3D(0 , 0 , 0);
  en_mIntendedRotation = FLOATmatrix3D(0);
  CRationalEntity::SetDefaultProperties();
}
  
#line 332 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
void CMovableEntity::ResetPredictionFilter(void) 
#line 333 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 334 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_tmLastPredictionHead  = - 2;
#line 335 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vLastHead  = en_plPlacement  . pl_PositionVector ;
#line 336 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vPredError  = en_vPredErrorLast  = FLOAT3D (0 , 0 , 0);
#line 337 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
   CMovableEntity::CMovableEntity(void) 
#line 341 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 342 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_pbpoStandOn  = NULL ;
#line 343 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_apbpoNearPolygons  . SetAllocationStep  (5);
#line 344 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ResetPredictionFilter  ();
#line 345 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
   CMovableEntity:: ~ CMovableEntity(void) 
#line 347 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 348 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  void CMovableEntity::OnInitialize(const CEntityEvent & eeInput) 
#line 352 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 353 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CRationalEntity  :: OnInitialize  (eeInput );
#line 354 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ClearTemporaryData  ();
#line 355 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vIntendedTranslation  = FLOAT3D (0 , 0 , 0);
#line 356 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_mIntendedRotation  . Diagonal  (1.0f);
#line 357 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_boxNearCached  = FLOATaabbox3D ();
#line 358 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_boxMovingEstimate  = FLOATaabbox3D ();
#line 359 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_pbpoStandOn  = NULL ;
#line 360 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  void CMovableEntity::OnEnd(void) 
#line 363 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 365 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_lnInMovers  . IsLinked  ()){
#line 366 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_lnInMovers  . Remove  ();
#line 367 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 368 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ClearTemporaryData  ();
#line 369 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_boxNearCached  = FLOATaabbox3D ();
#line 370 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_boxMovingEstimate  = FLOATaabbox3D ();
#line 371 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CRationalEntity  :: OnEnd  ();
#line 372 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  void CMovableEntity::Copy(CEntity & enOther,ULONG ulFlags) 
#line 374 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 375 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CRationalEntity  :: Copy  (enOther  , ulFlags );
#line 376 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CMovableEntity  * pmenOther  = (CMovableEntity  *) (& enOther );
#line 378 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(ulFlags  & COPY_PREDICTOR ){
#line 379 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_plLastPlacement  = pmenOther  -> en_plLastPlacement ;
#line 380 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vNextPosition  = pmenOther  -> en_vNextPosition ;
#line 381 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_mNextRotation  = pmenOther  -> en_mNextRotation ;
#line 384 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vAppliedTranslation  = pmenOther  -> en_vAppliedTranslation ;
#line 385 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_mAppliedRotation  = pmenOther  -> en_mAppliedRotation ;
#line 386 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_boxNearCached  = pmenOther  -> en_boxNearCached ;
#line 387 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_boxMovingEstimate  = pmenOther  -> en_boxMovingEstimate ;
#line 388 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_pbpoStandOn  = pmenOther  -> en_pbpoStandOn ;
#line 389 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_apbpoNearPolygons  = pmenOther  -> en_apbpoNearPolygons ;
#line 390 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 391 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ClearTemporaryData  ();
#line 392 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_boxNearCached  = FLOATaabbox3D ();
#line 393 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_boxMovingEstimate  = FLOATaabbox3D ();
#line 394 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_pbpoStandOn  = NULL ;
#line 395 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 397 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ResetPredictionFilter  ();
#line 398 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_plLastPlacement  = pmenOther  -> en_plLastPlacement ;
#line 399 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(pmenOther  -> en_lnInMovers  . IsLinked  ()){
#line 400 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddToMovers  ();
#line 401 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 402 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  
#line 404 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
void CMovableEntity::ClearTemporaryData(void) 
#line 405 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 406 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_plLastPlacement  = en_plPlacement ;
#line 408 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vNextPosition  = en_plPlacement  . pl_PositionVector ;
#line 409 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_mNextRotation  = en_mRotation ;
#line 412 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vAppliedTranslation  = FLOAT3D (0 , 0 , 0);
#line 413 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_mAppliedRotation  . Diagonal  (1.0f);
#line 414 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ResetPredictionFilter  ();
#line 420 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  void CMovableEntity::ChecksumForSync(ULONG & ulCRC,INDEX iExtensiveSyncCheck) 
#line 424 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 425 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CRationalEntity  :: ChecksumForSync  (ulCRC  , iExtensiveSyncCheck );
#line 426 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(iExtensiveSyncCheck  > 0){
#line 427 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_pbpoStandOn  != NULL ){
#line 428 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CRC_AddLONG  (ulCRC  , en_pbpoStandOn  -> bpo_iInWorld );
#line 429 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 430 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CRC_AddFLOAT  (ulCRC  , en_apbpoNearPolygons  . Count  ());
#line 431 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(iExtensiveSyncCheck  > 2){
#line 432 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
for(INDEX i  = 0;i  < en_apbpoNearPolygons  . Count  ();i  ++){
#line 433 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CRC_AddLONG  (ulCRC  , en_apbpoNearPolygons  [ i  ] -> bpo_iInWorld );
#line 434 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 435 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 436 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CRC_AddBlock  (ulCRC  , (UBYTE  *) & en_vReferencePlane  , sizeof  (en_vReferencePlane ));
#line 437 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CRC_AddBlock  (ulCRC  , (UBYTE  *) & en_vDesiredTranslationRelative  , sizeof  (en_vDesiredTranslationRelative ));
#line 438 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CRC_AddBlock  (ulCRC  , (UBYTE  *) & en_aDesiredRotationRelative  , sizeof  (en_aDesiredRotationRelative ));
#line 439 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CRC_AddBlock  (ulCRC  , (UBYTE  *) & en_vCurrentTranslationAbsolute  , sizeof  (en_vCurrentTranslationAbsolute ));
#line 440 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CRC_AddBlock  (ulCRC  , (UBYTE  *) & en_aCurrentRotationAbsolute  , sizeof  (en_aCurrentRotationAbsolute ));
#line 441 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 442 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  void CMovableEntity::DumpSync_t(CTStream & strm,INDEX iExtensiveSyncCheck) 
#line 446 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 447 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CRationalEntity  :: DumpSync_t  (strm  , iExtensiveSyncCheck );
#line 448 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(iExtensiveSyncCheck  > 0){
#line 449 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
strm  . FPrintF_t  ("standon polygon: ");
#line 450 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_pbpoStandOn  != NULL ){
#line 451 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
strm  . FPrintF_t  ("%d\n" , en_pbpoStandOn  -> bpo_iInWorld );
#line 452 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 453 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
strm  . FPrintF_t  ("<none>\n");
#line 454 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 455 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
strm  . FPrintF_t  ("near polygons: %d - " , en_apbpoNearPolygons  . Count  ());
#line 456 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(iExtensiveSyncCheck  > 2){
#line 457 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
for(INDEX i  = 0;i  < en_apbpoNearPolygons  . Count  ();i  ++){
#line 458 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
strm  . FPrintF_t  ("%d, " , en_apbpoNearPolygons  [ i  ] -> bpo_iInWorld );
#line 459 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 460 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 461 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
strm  . FPrintF_t  ("\n");
#line 462 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
strm  . FPrintF_t  ("desired translation: %g, %g, %g (%08X %08X %08X)\n" , 
#line 463 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vDesiredTranslationRelative  (1) , 
#line 464 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vDesiredTranslationRelative  (2) , 
#line 465 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vDesiredTranslationRelative  (3) , 
#line 466 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(ULONG  &) en_vDesiredTranslationRelative  (1) , 
#line 467 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(ULONG  &) en_vDesiredTranslationRelative  (2) , 
#line 468 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(ULONG  &) en_vDesiredTranslationRelative  (3));
#line 469 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
strm  . FPrintF_t  ("desired rotation: %g, %g, %g (%08X %08X %08X)\n" , 
#line 470 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_aDesiredRotationRelative  (1) , 
#line 471 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_aDesiredRotationRelative  (2) , 
#line 472 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_aDesiredRotationRelative  (3) , 
#line 473 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(ULONG  &) en_aDesiredRotationRelative  (1) , 
#line 474 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(ULONG  &) en_aDesiredRotationRelative  (2) , 
#line 475 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(ULONG  &) en_aDesiredRotationRelative  (3));
#line 476 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
strm  . FPrintF_t  ("current translation: %g, %g, %g (%08X %08X %08X)\n" , 
#line 477 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vCurrentTranslationAbsolute  (1) , 
#line 478 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vCurrentTranslationAbsolute  (2) , 
#line 479 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vCurrentTranslationAbsolute  (3) , 
#line 480 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(ULONG  &) en_vCurrentTranslationAbsolute  (1) , 
#line 481 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(ULONG  &) en_vCurrentTranslationAbsolute  (2) , 
#line 482 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(ULONG  &) en_vCurrentTranslationAbsolute  (3));
#line 483 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
strm  . FPrintF_t  ("current rotation: %g, %g, %g (%08X %08X %08X)\n" , 
#line 484 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_aCurrentRotationAbsolute  (1) , 
#line 485 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_aCurrentRotationAbsolute  (2) , 
#line 486 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_aCurrentRotationAbsolute  (3) , 
#line 487 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(ULONG  &) en_aCurrentRotationAbsolute  (1) , 
#line 488 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(ULONG  &) en_aCurrentRotationAbsolute  (2) , 
#line 489 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(ULONG  &) en_aCurrentRotationAbsolute  (3));
#line 490 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
strm  . FPrintF_t  ("reference plane: %g, %g, %g (%08X %08X %08X)\n" , 
#line 491 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vReferencePlane  (1) , 
#line 492 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vReferencePlane  (2) , 
#line 493 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vReferencePlane  (3) , 
#line 494 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(ULONG  &) en_vReferencePlane  (1) , 
#line 495 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(ULONG  &) en_vReferencePlane  (2) , 
#line 496 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(ULONG  &) en_vReferencePlane  (3));
#line 497 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
strm  . FPrintF_t  ("reference surface: %d\n" , en_iReferenceSurface );
#line 498 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
strm  . FPrintF_t  ("reference entity: ");
#line 499 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_penReference  != NULL ){
#line 500 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
strm  . FPrintF_t  ("id: %08X\n" , en_penReference  -> en_ulID );
#line 501 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 502 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
strm  . FPrintF_t  ("none\n");
#line 503 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 504 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 505 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  void CMovableEntity::Read_t(CTStream * istr) 
#line 509 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 510 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CRationalEntity  :: Read_t  (istr );
#line 512 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ClearTemporaryData  ();
#line 515 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(istr  -> PeekID_t  () == CChunkID  ("MENT")){
#line 516 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
istr  -> ExpectID_t  ("MENT");
#line 518 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
INDEX ibpo ;
#line 519 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(* istr ) >> ibpo ;
#line 520 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_pbpoStandOn  = GetWorldPolygonPointer  (ibpo );
#line 522 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
BOOL bAnyNULLs  = FALSE ;
#line 523 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
INDEX ctbpoNear ;
#line 524 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(* istr ) >> ctbpoNear ;
#line 525 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(ctbpoNear  > 0){
#line 526 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_apbpoNearPolygons  . PopAll  ();
#line 527 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_apbpoNearPolygons  . Push  (ctbpoNear );
#line 528 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
for(INDEX i  = 0;i  < ctbpoNear ;i  ++){
#line 529 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
INDEX ibpo ;
#line 530 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(* istr ) >> ibpo ;
#line 531 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_apbpoNearPolygons  [ i  ] = GetWorldPolygonPointer  (ibpo );
#line 532 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_apbpoNearPolygons  [ i  ] == NULL ){
#line 533 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
bAnyNULLs  = TRUE ;
#line 534 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 535 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 536 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(bAnyNULLs ){
#line 537 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CPrintF  ("NULL saved for near polygon!\n");
#line 538 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_apbpoNearPolygons  . PopAll  ();
#line 539 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 540 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 541 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 544 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
BOOL bWasMoving ;
#line 545 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(* istr ) >> bWasMoving ;
#line 546 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(bWasMoving ){
#line 548 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddToMovers  ();
#line 549 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 550 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  void CMovableEntity::Write_t(CTStream * ostr) 
#line 553 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 554 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CRationalEntity  :: Write_t  (ostr );
#line 556 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ostr  -> WriteID_t  ("MENT");
#line 558 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
INDEX ibpo ;
#line 559 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ibpo  = GetWorldPolygonIndex  (en_pbpoStandOn );
#line 560 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(* ostr ) << ibpo ;
#line 562 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
INDEX ctbpoNear  = en_apbpoNearPolygons  . Count  ();
#line 563 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(* ostr ) << ctbpoNear ;
#line 564 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
for(INDEX i  = 0;i  < ctbpoNear ;i  ++){
#line 565 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
INDEX ibpo ;
#line 566 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ibpo  = GetWorldPolygonIndex  (en_apbpoNearPolygons  [ i  ]);
#line 567 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(* ostr ) << ibpo ;
#line 568 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 572 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(* ostr ) << en_lnInMovers  . IsLinked  ();
#line 573 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  CPlacement3D CMovableEntity::GetLerpedPlacement(void)const 
#line 577 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 579 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fLerpFactor ;
#line 580 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(IsPredictor  ()){
#line 581 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
fLerpFactor  = _pTimer  -> GetLerpFactor  ();
#line 582 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 583 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
fLerpFactor  = _pTimer  -> GetLerpFactor2  ();
#line 584 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 585 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CPlacement3D plLerped ;
#line 586 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
plLerped  . Lerp  (en_plLastPlacement  , en_plPlacement  , fLerpFactor );
#line 587 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CMovableEntity  * penTail  = (CMovableEntity  *) GetPredictedSafe  ((CEntity  *) this );
#line 589 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
extern  BOOL _bPredictionActive ;
#line 590 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(_bPredictionActive ){
#line 592 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vError  = penTail  -> en_vPredError ;
#line 593 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vError  *= pow  (cli_fPredictionFilter  , fLerpFactor );
#line 598 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
plLerped  . pl_PositionVector  -= vError ;
#line 599 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 600 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return plLerped ;
#line 601 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  void CMovableEntity::AddToMovers(void) 
#line 604 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 605 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(! en_lnInMovers  . IsLinked  ()){
#line 606 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_pwoWorld  -> wo_lhMovers  . AddTail  (en_lnInMovers );
#line 607 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 608 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  void CMovableEntity::AddToMoversDuringMoving(void) 
#line 611 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 613 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_lnInMovers  . IsLinked  ()){
#line 615 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return ;
#line 616 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 618 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddToMovers  ();
#line 620 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_ulPhysicsFlags  |= EPF_FORCEADDED ;
#line 621 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  void CMovableEntity::SetDesiredRotation(const ANGLE3D & aRotation) 
#line 625 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 626 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_aDesiredRotationRelative  = aRotation ;
#line 627 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddToMovers  ();
#line 628 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  const ANGLE3D & CMovableEntity::GetDesiredRotation(void)const {return en_aDesiredRotationRelative ;}
  void CMovableEntity::SetDesiredTranslation(const FLOAT3D & vTranslation) 
#line 633 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 634 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vDesiredTranslationRelative  = vTranslation ;
#line 635 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddToMovers  ();
#line 636 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  const FLOAT3D & CMovableEntity::GetDesiredTranslation(void)const {return en_vDesiredTranslationRelative ;}
  void CMovableEntity::GiveImpulseTranslationRelative(const FLOAT3D & vImpulseSpeedRelative) 
#line 641 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 642 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CPlacement3D plImpulseSpeedAbsolute  (vImpulseSpeedRelative  , ANGLE3D (0 , 0 , 0));
#line 643 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
plImpulseSpeedAbsolute  . RelativeToAbsolute  (
#line 644 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CPlacement3D (FLOAT3D (0.0f , 0.0f , 0.0f) , en_plPlacement  . pl_OrientationAngle ));
#line 645 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vCurrentTranslationAbsolute  += plImpulseSpeedAbsolute  . pl_PositionVector ;
#line 646 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddToMovers  ();
#line 647 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  void CMovableEntity::GiveImpulseTranslationAbsolute(const FLOAT3D & vImpulseSpeed) 
#line 649 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 650 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vCurrentTranslationAbsolute  += vImpulseSpeed ;
#line 651 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddToMovers  ();
#line 652 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  void CMovableEntity::LaunchAsPropelledProjectile(const FLOAT3D & vImpulseSpeedRelative,
#line 655 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CMovableEntity * penLauncher) 
#line 656 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 657 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vDesiredTranslationRelative  = vImpulseSpeedRelative ;
#line 658 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vCurrentTranslationAbsolute  += vImpulseSpeedRelative  * en_mRotation ;
#line 660 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddToMovers  ();
#line 661 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  void CMovableEntity::LaunchAsFreeProjectile(const FLOAT3D & vImpulseSpeedRelative,
#line 663 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CMovableEntity * penLauncher) 
#line 664 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 665 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vCurrentTranslationAbsolute  += vImpulseSpeedRelative  * en_mRotation ;
#line 668 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddToMovers  ();
#line 669 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  void CMovableEntity::ForceStopTranslation(void) {
#line 673 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vDesiredTranslationRelative  = FLOAT3D (0.0f , 0.0f , 0.0f);
#line 674 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vCurrentTranslationAbsolute  = FLOAT3D (0.0f , 0.0f , 0.0f);
#line 675 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vAppliedTranslation  = FLOAT3D (0.0f , 0.0f , 0.0f);
#line 676 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  void CMovableEntity::ForceStopRotation(void) {
#line 680 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_aDesiredRotationRelative  = ANGLE3D (0 , 0 , 0);
#line 681 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_aCurrentRotationAbsolute  = ANGLE3D (0 , 0 , 0);
#line 682 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_mAppliedRotation  . Diagonal  (1.0f);
#line 683 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  void CMovableEntity::ForceFullStop(void) {
#line 687 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ForceStopTranslation  ();
#line 688 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ForceStopRotation  ();
#line 689 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  void CMovableEntity::FakeJump(const FLOAT3D & vOrgSpeed,const FLOAT3D & vDirection,FLOAT fStrength,
#line 693 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fParallelMultiplier,FLOAT fNormalMultiplier,FLOAT fMaxExitSpeed,TIME tmControl) 
#line 694 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 696 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_tmJumped  = _pTimer  -> CurrentTick  () - en_tmMaxJumpControl  + tmControl ;
#line 699 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vCurrentNormal ;
#line 700 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vCurrentParallel ;
#line 701 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
GetParallelAndNormalComponents  (vOrgSpeed  , vDirection  , vCurrentParallel  , vCurrentNormal );
#line 710 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vCurrentTranslationAbsolute  = 
#line 711 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vCurrentParallel  * fParallelMultiplier  + 
#line 712 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vCurrentNormal  * fNormalMultiplier  + 
#line 713 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vDirection  * fStrength ;
#line 716 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fLength  = en_vCurrentTranslationAbsolute  . Length  ();
#line 717 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(fLength  > fMaxExitSpeed )
#line 718 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 719 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vCurrentTranslationAbsolute  = 
#line 720 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vCurrentTranslationAbsolute  / fLength  * fMaxExitSpeed ;
#line 721 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 729 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_penReference  = NULL ;
#line 730 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_pbpoStandOn  = NULL ;
#line 731 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vReferencePlane  = FLOAT3D (0.0f , 0.0f , 0.0f);
#line 732 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_iReferenceSurface  = 0;
#line 735 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddToMovers  ();
#line 736 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  ANGLE CMovableEntity::GetRelativeHeading(const FLOAT3D & vDirection) {
#line 740 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ASSERT  (Abs  (vDirection  . Length  () - 1) < 0.001f);
#line 742 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fFront  = 
#line 743 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
- vDirection  (1) * en_mRotation  (1 , 3) 
#line 744 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
- vDirection  (2) * en_mRotation  (2 , 3) 
#line 745 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
- vDirection  (3) * en_mRotation  (3 , 3);
#line 747 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fLeft  = 
#line 748 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
- vDirection  (1) * en_mRotation  (1 , 1) 
#line 749 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
- vDirection  (2) * en_mRotation  (2 , 1) 
#line 750 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
- vDirection  (3) * en_mRotation  (3 , 1);
#line 752 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return ATan2  (fLeft  , fFront );
#line 753 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  ANGLE CMovableEntity::GetRelativePitch(const FLOAT3D & vDirection) {
#line 755 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ASSERT  (Abs  (vDirection  . Length  () - 1) < 0.001f);
#line 757 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fFront  = 
#line 758 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
- vDirection  (1) * en_mRotation  (1 , 3) 
#line 759 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
- vDirection  (2) * en_mRotation  (2 , 3) 
#line 760 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
- vDirection  (3) * en_mRotation  (3 , 3);
#line 762 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fUp  = 
#line 763 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
+ vDirection  (1) * en_mRotation  (1 , 2) 
#line 764 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
+ vDirection  (2) * en_mRotation  (2 , 2) 
#line 765 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
+ vDirection  (3) * en_mRotation  (3 , 2);
#line 767 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return ATan2  (fUp  , fFront );
#line 768 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  void CMovableEntity::GetReferenceHeadingDirection(const FLOAT3D & vReference,ANGLE aH,FLOAT3D & vDirection) {
#line 772 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ASSERT  (Abs  (vReference  . Length  () - 1) < 0.001f);
#line 773 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vY  (en_mRotation  (1 , 2) , en_mRotation  (2 , 2) , en_mRotation  (3 , 2));
#line 774 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vX  = (vY  * vReference ) . Normalize  ();
#line 775 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vMZ  = vY  * vX ;
#line 776 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vDirection  = - vX  * Sin  (aH ) + vMZ  * Cos  (aH );
#line 777 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  void CMovableEntity::GetHeadingDirection(ANGLE aH,FLOAT3D & vDirection) {
#line 781 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vX  (en_mRotation  (1 , 1) , en_mRotation  (2 , 1) , en_mRotation  (3 , 1));
#line 782 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vZ  (en_mRotation  (1 , 3) , en_mRotation  (2 , 3) , en_mRotation  (3 , 3));
#line 783 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vDirection  = - vX  * Sin  (aH ) - vZ  * Cos  (aH );
#line 784 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  void CMovableEntity::GetPitchDirection(ANGLE aH,FLOAT3D & vDirection) {
#line 788 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vY  (en_mRotation  (1 , 2) , en_mRotation  (2 , 2) , en_mRotation  (3 , 2));
#line 789 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vZ  (en_mRotation  (1 , 3) , en_mRotation  (2 , 3) , en_mRotation  (3 , 3));
#line 790 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vDirection  = - vZ  * Cos  (aH ) + vY  * Sin  (aH );
#line 791 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  
#line 794 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CEntity * CMovableEntity::MiscDamageInflictor(void) 
#line 795 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 798 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_penLastValidReference  != NULL ){
#line 799 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return en_penLastValidReference ;
#line 800 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 801 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CBrushSector  * pbsc  = GetFirstSector  ();
#line 802 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(pbsc  == NULL ){
#line 803 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return this ;
#line 804 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 805 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return pbsc  -> bsc_pbmBrushMip  -> bm_pbrBrush  -> br_penEntity ;
#line 806 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 807 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 808 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  
#line 811 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
void CMovableEntity::UpdateOneSectorForce(CBrushSector & bsc,FLOAT fRatio) 
#line 812 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 814 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(fRatio  < 0.01f){
#line 816 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return ;
#line 817 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 818 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
INDEX iForceType  = bsc  . GetForceType  ();
#line 819 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CEntity  * penEntity  = bsc  . bsc_pbmBrushMip  -> bm_pbrBrush  -> br_penEntity ;
#line 839 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CEntityForce  * pef  = NULL ;
#line 840 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
for(INDEX iForce  = 0;iForce  < _aefForces  . Count  ();iForce  ++){
#line 841 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(penEntity  == _aefForces  [ iForce  ] . ef_penEntity  
#line 842 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
&& iForceType  == _aefForces  [ iForce  ] . ef_iForceType ){
#line 843 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
pef  = & _aefForces  [ iForce  ];
#line 844 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
break ;
#line 845 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 846 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 849 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(pef  == NULL ){
#line 851 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
pef  = _aefForces  . Push  (1);
#line 852 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
pef  -> ef_penEntity  = penEntity ;
#line 853 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
pef  -> ef_iForceType  = iForceType ;
#line 854 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
pef  -> ef_fRatio  = 0.0f;
#line 855 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 856 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
pef  -> ef_fRatio  += fRatio ;
#line 857 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  
#line 860 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
void CMovableEntity::TestFields(INDEX & iUpContent,INDEX & iDnContent,FLOAT & fImmersionFactor) 
#line 861 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 863 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ASSERT  (en_RenderType  == RT_MODEL  || en_RenderType  == RT_EDITORMODEL  || en_RenderType  == RT_SKAMODEL  || en_RenderType  == RT_SKAEDITORMODEL );
#line 864 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
iUpContent  = 0;
#line 865 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
iDnContent  = 0;
#line 866 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fUp  = 0.0f;
#line 867 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fDn  = 0.0f;
#line 869 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D & vOffset  = en_plPlacement  . pl_PositionVector ;
#line 870 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOATmatrix3D & mRotation  = en_mRotation ;
#line 872 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vMin  = FLOAT3D (0 , en_pciCollisionInfo  -> ci_fMinHeight  , 0);
#line 873 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vMax  = FLOAT3D (0 , en_pciCollisionInfo  -> ci_fMaxHeight  , 0);
#line 874 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vMin  = vMin  * mRotation  + vOffset ;
#line 875 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vMax  = vMax  * mRotation  + vOffset ;
#line 877 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CStaticArray  < CMovingSphere  > & absSpheres  = en_pciCollisionInfo  -> ci_absSpheres ;
#line 878 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FOREACHINSTATICARRAY  (absSpheres  , CMovingSphere  , itms ){
#line 879 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
itms  -> ms_vRelativeCenter0  = itms  -> ms_vCenter  * mRotation  + vOffset ;
#line 880 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 883 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_aefForces  . PopAll  ();
#line 885 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{FOREACHSRCOFDST  (en_rdSectors  , CBrushSector  , bsc_rsEntities  , pbsc ) 
#line 886 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CBrushSector  & bsc  = * pbsc ;
#line 888 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(! bsc  . bsc_pbmBrushMip  -> IsFirstMip  ()){
#line 890 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
continue ;
#line 891 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 893 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CEntity  * penSector  = bsc  . bsc_pbmBrushMip  -> bm_pbrBrush  -> br_penEntity ;
#line 896 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(penSector  -> en_RenderType  != RT_BRUSH ){
#line 898 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
continue ;
#line 899 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 902 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
double  dMin  , dMax ;
#line 903 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
bsc  . bsc_bspBSPTree  . FindLineMinMax  (FLOATtoDOUBLE  (vMin ) , FLOATtoDOUBLE  (vMax ) , dMin  , dMax );
#line 906 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
INDEX iContent  = bsc  . GetContentType  ();
#line 907 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(iContent  != 0){
#line 909 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(dMax  > 0.0f && dMin  < 1.0f){
#line 912 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(dMin  < 0.01f){
#line 914 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
iDnContent  = iContent ;
#line 915 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
fDn  = Max  (fDn  , FLOAT (dMax ));
#line 916 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 918 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(dMax  > 0.99f){
#line 920 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
iUpContent  = iContent ;
#line 921 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
fUp  = Max  (fUp  , 1 - FLOAT (dMin ));
#line 922 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 923 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 924 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 927 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
UpdateOneSectorForce  (bsc  , dMax  - dMin );
#line 929 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ENDFOR ;}
#line 933 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(iUpContent  == iDnContent ){
#line 935 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
fImmersionFactor  = 1.0f;
#line 937 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 939 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(iUpContent  == 0){
#line 940 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
fImmersionFactor  = fDn ;
#line 941 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else if(iDnContent  == 0){
#line 942 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
fImmersionFactor  = 1 - fUp ;
#line 943 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 944 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
fImmersionFactor  = Max  (fDn  , 1 - fUp );
#line 945 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 947 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(fImmersionFactor  < 0.01f){
#line 948 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
fImmersionFactor  = 1.0f;
#line 949 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
iDnContent  = iUpContent ;
#line 950 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else if(fImmersionFactor  > 0.99f){
#line 951 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
fImmersionFactor  = 1.0f;
#line 952 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
iUpContent  = iDnContent ;
#line 953 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 954 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 957 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vGravityA  (0 , 0 , 0);
#line 958 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vGravityV  (0 , 0 , 0);
#line 959 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vForceA  (0 , 0 , 0);
#line 960 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vForceV  (0 , 0 , 0);
#line 961 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fRatioSum  = 0.0f;
#line 963 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{for(INDEX iForce  = 0;iForce  < _aefForces  . Count  ();iForce  ++){
#line 964 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CForceStrength  fsGravity ;
#line 965 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CForceStrength  fsField ;
#line 966 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_aefForces  [ iForce  ] . ef_penEntity  -> GetForce  (
#line 967 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_aefForces  [ iForce  ] . ef_iForceType  , en_plPlacement  . pl_PositionVector  , 
#line 968 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
fsGravity  , fsField );
#line 969 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fRatio  = _aefForces  [ iForce  ] . ef_fRatio ;
#line 970 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
fRatioSum  += fRatio ;
#line 971 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vGravityA  += fsGravity  . fs_vDirection  * fsGravity  . fs_fAcceleration  * fRatio ;
#line 972 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vGravityV  += fsGravity  . fs_vDirection  * fsGravity  . fs_fVelocity  * fRatio ;
#line 973 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(fsField  . fs_fAcceleration  > 0){
#line 974 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vForceA  += fsField  . fs_vDirection  * fsField  . fs_fAcceleration  * fRatio ;
#line 975 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vForceV  += fsField  . fs_vDirection  * fsField  . fs_fVelocity  * fRatio ;
#line 976 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 977 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_aefForces  [ iForce  ] . Clear  ();
#line 978 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}}
#line 979 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(fRatioSum  > 0){
#line 980 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vGravityA  /= fRatioSum ;
#line 981 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vGravityV  /= fRatioSum ;
#line 982 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vForceA  /= fRatioSum ;
#line 983 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vForceV  /= fRatioSum ;
#line 984 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 985 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_fGravityA  = vGravityA  . Length  ();
#line 986 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_fGravityA  < 0.01f){
#line 987 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_fGravityA  = 0;
#line 988 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 989 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_fGravityV  = vGravityV  . Length  ();
#line 990 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vGravityDir  = vGravityA  / en_fGravityA ;
#line 991 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 992 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_fForceA  = vForceA  . Length  ();
#line 993 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_fForceA  < 0.01f){
#line 994 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_fForceA  = 0;
#line 995 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 996 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_fForceV  = vForceV  . Length  ();
#line 997 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vForceDir  = vForceA  / en_fForceA ;
#line 998 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 999 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_aefForces  . PopAll  ();
#line 1000 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  
#line 1003 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
void CMovableEntity::TestBreathing(CContentType & ctUp) 
#line 1004 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 1006 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(! (en_ulPhysicsFlags  & (EPF_HASLUNGS  | EPF_HASGILLS ))){
#line 1008 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return ;
#line 1009 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1011 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
BOOL bCanBreathe  = 
#line 1012 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
((ctUp  . ct_ulFlags  & CTF_BREATHABLE_LUNGS ) && (en_ulPhysicsFlags  & EPF_HASLUNGS )) || 
#line 1013 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
((ctUp  . ct_ulFlags  & CTF_BREATHABLE_GILLS ) && (en_ulPhysicsFlags  & EPF_HASGILLS ));
#line 1014 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
TIME  tmNow  = _pTimer  -> CurrentTick  ();
#line 1015 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
TIME  tmBreathDelay  = tmNow  - en_tmLastBreathed ;
#line 1017 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(bCanBreathe ){
#line 1019 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_tmLastBreathed  = tmNow ;
#line 1021 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(tmBreathDelay  > _pTimer  -> TickQuantum  * 2){
#line 1023 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ETakingBreath  eTakingBreath ;
#line 1024 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
eTakingBreath  . fBreathDelay  = tmBreathDelay  / en_tmMaxHoldBreath ;
#line 1025 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
SendEvent  (eTakingBreath );
#line 1026 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1028 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 1030 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(tmBreathDelay  > en_tmMaxHoldBreath ){
#line 1032 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
InflictDirectDamage  (this  , MiscDamageInflictor  () , DMT_DROWNING  , ctUp  . ct_fDrowningDamageAmount  , 
#line 1033 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_plPlacement  . pl_PositionVector  , - en_vGravityDir );
#line 1035 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_tmLastBreathed  = tmNow  - en_tmMaxHoldBreath  + ctUp  . ct_tmDrowningDamageDelay ;
#line 1036 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1037 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1038 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  
#line 1039 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
void CMovableEntity::TestContentDamage(CContentType & ctDn,FLOAT fImmersion) 
#line 1040 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 1042 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(ctDn  . ct_fSwimDamageAmount  > 0){
#line 1043 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
TIME  tmNow  = _pTimer  -> CurrentTick  ();
#line 1045 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(ctDn  . ct_tmSwimDamageDelay  > 0){
#line 1047 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(tmNow  - en_tmLastSwimDamage  > ctDn  . ct_tmSwimDamageDelay  + _pTimer  -> TickQuantum ){
#line 1049 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_tmLastSwimDamage  = tmNow  + ctDn  . ct_tmSwimDamageDelay ;
#line 1050 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return ;
#line 1051 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1052 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1054 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(tmNow  - en_tmLastSwimDamage  > ctDn  . ct_tmSwimDamageFrequency ){
#line 1056 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
InflictDirectDamage  (this  , MiscDamageInflictor  () , 
#line 1057 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(DamageType ) ctDn  . ct_iSwimDamageType  , ctDn  . ct_fSwimDamageAmount  * fImmersion  , 
#line 1058 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_plPlacement  . pl_PositionVector  , - en_vGravityDir );
#line 1059 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_tmLastSwimDamage  = tmNow ;
#line 1060 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1061 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1063 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(ctDn  . ct_fKillImmersion  > 0 && fImmersion  >= ctDn  . ct_fKillImmersion  
#line 1064 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
&& (en_ulFlags  & ENF_ALIVE )){
#line 1066 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
InflictDirectDamage  (this  , MiscDamageInflictor  () , 
#line 1067 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(DamageType ) ctDn  . ct_iKillDamageType  , GetHealth  () * 10.0f , 
#line 1068 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_plPlacement  . pl_PositionVector  , - en_vGravityDir );
#line 1069 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1070 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  
#line 1072 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
void CMovableEntity::TestSurfaceDamage(CSurfaceType & stDn) 
#line 1073 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 1075 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(stDn  . st_fWalkDamageAmount  > 0){
#line 1076 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
TIME  tmNow  = _pTimer  -> CurrentTick  ();
#line 1078 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(stDn  . st_tmWalkDamageDelay  > 0){
#line 1080 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(tmNow  - en_tmLastSwimDamage  > stDn  . st_tmWalkDamageDelay  + _pTimer  -> TickQuantum ){
#line 1082 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_tmLastSwimDamage  = tmNow  + stDn  . st_tmWalkDamageDelay ;
#line 1083 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return ;
#line 1084 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1085 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1087 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(tmNow  - en_tmLastSwimDamage  > stDn  . st_tmWalkDamageFrequency ){
#line 1089 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
InflictDirectDamage  (this  , MiscDamageInflictor  () , 
#line 1090 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(DamageType ) stDn  . st_iWalkDamageType  , stDn  . st_fWalkDamageAmount  , 
#line 1091 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_plPlacement  . pl_PositionVector  , - en_vGravityDir );
#line 1092 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_tmLastSwimDamage  = tmNow ;
#line 1093 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1094 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1095 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  
#line 1098 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
void CMovableEntity::SendTouchEvent(const CClipMove & cmMove) 
#line 1099 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 1100 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ETouch  etouchThis ;
#line 1101 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ETouch  etouchOther ;
#line 1102 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
etouchThis  . penOther  = cmMove  . cm_penHit ;
#line 1103 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
etouchThis  . bThisMoved  = FALSE ;
#line 1104 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
etouchThis  . plCollision  = cmMove  . cm_plClippedPlane ;
#line 1105 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
etouchOther  . penOther  = this ;
#line 1106 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
etouchOther  . bThisMoved  = TRUE ;
#line 1107 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
etouchOther  . plCollision  = cmMove  . cm_plClippedPlane ;
#line 1108 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
SendEvent  (etouchThis );
#line 1109 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
cmMove  . cm_penHit  -> SendEvent  (etouchOther );
#line 1110 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  
#line 1113 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
void CMovableEntity::SendBlockEvent(CClipMove & cmMove) 
#line 1114 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 1115 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
EBlock  eBlock ;
#line 1116 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
eBlock  . penOther  = cmMove  . cm_penHit ;
#line 1117 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
eBlock  . plCollision  = cmMove  . cm_plClippedPlane ;
#line 1118 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
SendEvent  (eBlock );
#line 1119 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  
#line 1121 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
BOOL CMovableEntity::IsStandingOnPolygon(CBrushPolygon * pbpo) 
#line 1122 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 1123 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StartTimer  ((INDEX) CPhysicsProfile  :: PTI_ISSTANDINGONPOLYGON );
#line 1125 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_pciCollisionInfo  == NULL  
#line 1126 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
|| ! (en_pciCollisionInfo  -> ci_ulFlags  & CIF_CANSTANDONHANDLE )){
#line 1128 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_ISSTANDINGONPOLYGON );
#line 1129 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return FALSE ;
#line 1130 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1133 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_pbpoStandOn  -> bpo_pbscSector  -> bsc_pbmBrushMip  -> bm_pbrBrush  -> br_penEntity  -> en_ulCollisionFlags  == 0){
#line 1135 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return FALSE ;
#line 1136 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1138 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
const FLOATplane3D & plPolygon  = pbpo  -> bpo_pbplPlane  -> bpl_plAbsolute ;
#line 1140 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vHandle  = en_plPlacement  . pl_PositionVector ;
#line 1141 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vHandle  (1) += en_pciCollisionInfo  -> ci_fHandleY  * en_mRotation  (1 , 2);
#line 1142 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vHandle  (2) += en_pciCollisionInfo  -> ci_fHandleY  * en_mRotation  (2 , 2);
#line 1143 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vHandle  (3) += en_pciCollisionInfo  -> ci_fHandleY  * en_mRotation  (3 , 2);
#line 1144 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vHandle  -= ((FLOAT3D &) plPolygon ) * en_pciCollisionInfo  -> ci_fHandleR ;
#line 1147 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(plPolygon  . PointDistance  (vHandle ) > 0.01f){
#line 1149 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_ISSTANDINGONPOLYGON );
#line 1150 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return FALSE ;
#line 1151 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1154 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
INDEX iMajorAxis1  , iMajorAxis2 ;
#line 1155 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
GetMajorAxesForPlane  (plPolygon  , iMajorAxis1  , iMajorAxis2 );
#line 1158 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CIntersector  isIntersector  (vHandle  (iMajorAxis1 ) , vHandle  (iMajorAxis2 ));
#line 1160 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FOREACHINSTATICARRAY  (pbpo  -> bpo_abpePolygonEdges  , CBrushPolygonEdge  , itbpePolygonEdge ){
#line 1162 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
const FLOAT3D & vVertex0  = itbpePolygonEdge  -> bpe_pbedEdge  -> bed_pbvxVertex0  -> bvx_vAbsolute ;
#line 1163 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
const FLOAT3D & vVertex1  = itbpePolygonEdge  -> bpe_pbedEdge  -> bed_pbvxVertex1  -> bvx_vAbsolute ;
#line 1165 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
isIntersector  . AddEdge  (
#line 1166 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vVertex0  (iMajorAxis1 ) , vVertex0  (iMajorAxis2 ) , 
#line 1167 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vVertex1  (iMajorAxis1 ) , vVertex1  (iMajorAxis2 ));
#line 1168 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1171 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(isIntersector  . IsIntersecting  ()){
#line 1173 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_ISSTANDINGONPOLYGON );
#line 1174 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return TRUE ;
#line 1176 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 1178 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_ISSTANDINGONPOLYGON );
#line 1179 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return FALSE ;
#line 1180 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1181 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  
#line 1184 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
BOOL CMovableEntity::IsPolygonBelowPoint(CBrushPolygon * pbpo,const FLOAT3D & vPoint,FLOAT fMaxDist) 
#line 1185 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 1186 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StartTimer  ((INDEX) CPhysicsProfile  :: PTI_ISSTANDINGONPOLYGON );
#line 1189 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if((pbpo  -> bpo_ulFlags  & BPOF_PASSABLE ) 
#line 1190 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
|| ! AllowForGroundPolygon  (pbpo )){
#line 1192 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_ISSTANDINGONPOLYGON );
#line 1193 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return FALSE ;
#line 1194 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1197 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
const FLOATplane3D & plPolygon  = pbpo  -> bpo_pbplPlane  -> bpl_plAbsolute ;
#line 1200 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fCos  = ((const FLOAT3D &) plPolygon ) % en_vGravityDir ;
#line 1202 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(fCos  > - 0.01f){
#line 1204 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_ISSTANDINGONPOLYGON );
#line 1205 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return FALSE ;
#line 1206 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1209 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CSurfaceType  & stReference  = en_pwoWorld  -> wo_astSurfaceTypes  [ pbpo  -> bpo_bppProperties  . bpp_ubSurfaceType  ];
#line 1210 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if((fCos  >= - stReference  . st_fClimbSlopeCos  && fCos  < 0) 
#line 1211 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
|| stReference  . st_ulFlags  & STF_SLIDEDOWNSLOPE ){
#line 1213 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_ISSTANDINGONPOLYGON );
#line 1214 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return FALSE ;
#line 1215 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1218 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fD  = plPolygon  . PointDistance  (vPoint );
#line 1220 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(fD  < - 0.01f){
#line 1222 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_ISSTANDINGONPOLYGON );
#line 1223 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return FALSE ;
#line 1224 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1227 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fDistance  = - fD  / fCos ;
#line 1229 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(fDistance  > fMaxDist ){
#line 1231 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_ISSTANDINGONPOLYGON );
#line 1232 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return FALSE ;
#line 1233 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1235 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vProjected  = vPoint  + en_vGravityDir  * fDistance ;
#line 1238 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
INDEX iMajorAxis1  , iMajorAxis2 ;
#line 1239 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
GetMajorAxesForPlane  (plPolygon  , iMajorAxis1  , iMajorAxis2 );
#line 1242 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CIntersector  isIntersector  (vProjected  (iMajorAxis1 ) , vProjected  (iMajorAxis2 ));
#line 1244 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FOREACHINSTATICARRAY  (pbpo  -> bpo_abpePolygonEdges  , CBrushPolygonEdge  , itbpePolygonEdge ){
#line 1246 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
const FLOAT3D & vVertex0  = itbpePolygonEdge  -> bpe_pbedEdge  -> bed_pbvxVertex0  -> bvx_vAbsolute ;
#line 1247 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
const FLOAT3D & vVertex1  = itbpePolygonEdge  -> bpe_pbedEdge  -> bed_pbvxVertex1  -> bvx_vAbsolute ;
#line 1249 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
isIntersector  . AddEdge  (
#line 1250 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vVertex0  (iMajorAxis1 ) , vVertex0  (iMajorAxis2 ) , 
#line 1251 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vVertex1  (iMajorAxis1 ) , vVertex1  (iMajorAxis2 ));
#line 1252 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1255 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(isIntersector  . IsIntersecting  ()){
#line 1257 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_ISSTANDINGONPOLYGON );
#line 1258 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return TRUE ;
#line 1260 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 1262 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_ISSTANDINGONPOLYGON );
#line 1263 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return FALSE ;
#line 1264 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1265 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  BOOL CMovableEntity::AllowForGroundPolygon(CBrushPolygon * pbpo) 
#line 1269 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 1270 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return TRUE ;
#line 1271 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  
#line 1274 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
BOOL CMovableEntity::IsSomeNearPolygonBelowPoint(const FLOAT3D & vPoint,FLOAT fMaxDist) 
#line 1275 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 1277 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return FALSE ;
#line 1278 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  
#line 1281 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
BOOL CMovableEntity::IsSomeSectorPolygonBelowPoint(CBrushSector * pbsc,const FLOAT3D & vPoint,FLOAT fMaxDist) 
#line 1282 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 1284 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FOREACHINSTATICARRAY  (pbsc  -> bsc_abpoPolygons  , CBrushPolygon  , itbpo ){
#line 1285 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CBrushPolygon  * pbpo  = itbpo ;
#line 1287 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(IsPolygonBelowPoint  (pbpo  , vPoint  , fMaxDist )){
#line 1289 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return TRUE ;
#line 1290 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1291 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1293 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return FALSE ;
#line 1294 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  
#line 1297 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
BOOL CMovableEntity::WouldFallInNextPosition(void) 
#line 1298 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 1300 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_fStepDnHeight  < 0){
#line 1302 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return FALSE ;
#line 1303 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1306 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_pbpoStandOn  != NULL  && 
#line 1307 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
IsPolygonBelowPoint  (en_pbpoStandOn  , en_vNextPosition  , en_fStepDnHeight )){
#line 1309 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return FALSE ;
#line 1310 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1313 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CListHead  lhActiveSectors ;
#line 1315 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CStaticStackArray  < CBrushPolygon  * > & apbpo  = en_apbpoNearPolygons ;
#line 1317 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
for(INDEX iPolygon  = 0;iPolygon  < apbpo  . Count  ();iPolygon  ++){
#line 1318 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CBrushPolygon  * pbpo  = apbpo  [ iPolygon  ];
#line 1320 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(IsPolygonBelowPoint  (pbpo  , en_vNextPosition  , en_fStepDnHeight )){
#line 1322 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
lhActiveSectors  . RemAll  ();
#line 1323 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return FALSE ;
#line 1324 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1326 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(! pbpo  -> bpo_pbscSector  -> bsc_lnInActiveSectors  . IsLinked  ()){
#line 1328 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
lhActiveSectors  . AddTail  (pbpo  -> bpo_pbscSector  -> bsc_lnInActiveSectors );
#line 1329 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1330 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1335 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_penReference  != NULL  && en_penReference  -> en_RenderType  == RT_BRUSH  
#line 1336 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
&& ! (en_penReference  -> en_ulFlags  & ENF_ZONING ) 
#line 1337 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
&& en_penReference  -> en_pbrBrush  != NULL ){
#line 1339 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CBrushMip  * pbmMip  = en_penReference  -> en_pbrBrush  -> GetFirstMip  ();
#line 1341 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FOREACHINDYNAMICARRAY  (pbmMip  -> bm_abscSectors  , CBrushSector  , itbsc ){
#line 1343 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(! itbsc  -> bsc_lnInActiveSectors  . IsLinked  ()){
#line 1345 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
lhActiveSectors  . AddTail  (itbsc  -> bsc_lnInActiveSectors );
#line 1346 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1347 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1348 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1351 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{FOREACHSRCOFDST  (en_rdSectors  , CBrushSector  , bsc_rsEntities  , pbsc );
#line 1353 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(! pbsc  -> bsc_lnInActiveSectors  . IsLinked  ()){
#line 1355 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
lhActiveSectors  . AddTail  (pbsc  -> bsc_lnInActiveSectors );
#line 1356 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1357 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ENDFOR ;}
#line 1360 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
BOOL bSupportFound  = FALSE ;
#line 1361 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FOREACHINLIST  (CBrushSector  , bsc_lnInActiveSectors  , lhActiveSectors  , itbsc ){
#line 1362 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CBrushSector  * pbsc  = itbsc ;
#line 1364 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(pbsc  -> bsc_pbmBrushMip  -> bm_pbrBrush  -> br_penEntity  -> en_ulFlags  & ENF_ZONING ){
#line 1366 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{FOREACHDSTOFSRC  (pbsc  -> bsc_rsEntities  , CEntity  , en_rdSectors  , pen );
#line 1367 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(pen  -> en_RenderType  == CEntity  :: RT_TERRAIN ){
#line 1368 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(IsTerrainBelowPoint  (pen  -> en_ptrTerrain  , en_vNextPosition  , en_fStepDnHeight  , en_vGravityDir )){
#line 1369 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
bSupportFound  = TRUE ;
#line 1370 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
goto  out ;
#line 1371 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1372 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
continue ;
#line 1373 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1374 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(pen  -> en_RenderType  != CEntity  :: RT_BRUSH  && 
#line 1375 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
pen  -> en_RenderType  != CEntity  :: RT_FIELDBRUSH ){
#line 1376 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
break ;
#line 1377 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1379 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CBrushMip  * pbmMip  = pen  -> en_pbrBrush  -> GetFirstMip  ();
#line 1381 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FOREACHINDYNAMICARRAY  (pbmMip  -> bm_abscSectors  , CBrushSector  , itbscInMip ){
#line 1383 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(! itbscInMip  -> bsc_lnInActiveSectors  . IsLinked  ()){
#line 1385 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
lhActiveSectors  . AddTail  (itbscInMip  -> bsc_lnInActiveSectors );
#line 1386 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1387 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1388 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ENDFOR ;}
#line 1389 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1391 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(IsSomeSectorPolygonBelowPoint  (itbsc  , en_vNextPosition  , en_fStepDnHeight )){
#line 1393 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
bSupportFound  = TRUE ;
#line 1394 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
break ;
#line 1395 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1396 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1397 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
out  :;
#line 1400 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
lhActiveSectors  . RemAll  ();
#line 1403 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return ! bSupportFound ;
#line 1404 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  
#line 1407 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
void CMovableEntity::ClearNextPosition(void) 
#line 1408 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 1409 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vNextPosition  = en_plPlacement  . pl_PositionVector ;
#line 1410 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_mNextRotation  = en_mRotation ;
#line 1411 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  
#line 1413 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
void CMovableEntity::SetPlacementFromNextPosition(void) 
#line 1414 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 1415 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StartTimer  ((INDEX) CPhysicsProfile  :: PTI_SETPLACEMENTFROMNEXTPOSITION );
#line 1417 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . IncrementTimerAveragingCounter  ((INDEX) CPhysicsProfile  :: PTI_SETPLACEMENTFROMNEXTPOSITION );
#line 1418 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CPlacement3D plNew ;
#line 1419 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
plNew  . pl_PositionVector  = en_vNextPosition ;
#line 1420 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
DecomposeRotationMatrixNoSnap  (plNew  . pl_OrientationAngle  , en_mNextRotation );
#line 1421 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOATmatrix3D mRotation ;
#line 1422 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
MakeRotationMatrixFast  (mRotation  , plNew  . pl_OrientationAngle );
#line 1423 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
SetPlacement_internal  (plNew  , mRotation  , TRUE );
#line 1437 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_SETPLACEMENTFROMNEXTPOSITION );
#line 1438 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  
#line 1440 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
BOOL CMovableEntity::TryToGoUpstairs(const FLOAT3D & vTranslationAbsolute,const CSurfaceType & stHit,
#line 1441 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
BOOL bHitStairsOrg) 
#line 1442 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 1443 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StartTimer  ((INDEX) CPhysicsProfile  :: PTI_TRYTOGOUPSTAIRS );
#line 1444 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . IncrementTimerAveragingCounter  ((INDEX) CPhysicsProfile  :: PTI_TRYTOGOUPSTAIRS );
#line 1447 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vTranslationHorizontal ;
#line 1448 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
GetNormalComponent  (vTranslationAbsolute  , en_vGravityDir  , vTranslationHorizontal );
#line 1452 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(vTranslationHorizontal  . Length  () < 0.001f){
#line 1455 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_TRYTOGOUPSTAIRS );
#line 1456 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return FALSE ;
#line 1457 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1458 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vTranslationHorizontalOrg  = vTranslationHorizontal ;
#line 1460 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(! bHitStairsOrg ){
#line 1462 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vTranslationHorizontal  . Normalize  ();
#line 1463 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vTranslationHorizontal  *= 0.5f;
#line 1464 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1467 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CPlacement3D plOriginal  = en_plPlacement ;
#line 1470 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fStairsHeight  = 0;
#line 1471 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(stHit  . st_fStairsHeight  > 0){
#line 1472 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
fStairsHeight  = Max  (stHit  . st_fStairsHeight  , en_fStepUpHeight );
#line 1473 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else if(stHit  . st_fStairsHeight  < 0){
#line 1474 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
fStairsHeight  = Min  (stHit  . st_fStairsHeight  , en_fStepUpHeight );
#line 1475 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1477 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CContentType  & ctDn  = en_pwoWorld  -> wo_actContentTypes  [ en_iDnContent  ];
#line 1478 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CContentType  & ctUp  = en_pwoWorld  -> wo_actContentTypes  [ en_iUpContent  ];
#line 1481 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
BOOL bGettingOutOfWater  = FALSE ;
#line 1482 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if((ctDn  . ct_ulFlags  & CTF_SWIMABLE ) && ! (ctUp  . ct_ulFlags  & CTF_SWIMABLE ) 
#line 1483 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
&& en_fImmersionFactor  > 0.3f){
#line 1485 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_pciCollisionInfo  != NULL ){
#line 1486 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
fStairsHeight  = fStairsHeight  * 2 + en_fImmersionFactor  * 
#line 1487 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(en_pciCollisionInfo  -> ci_fMaxHeight  - en_pciCollisionInfo  -> ci_fMinHeight );
#line 1489 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
bGettingOutOfWater  = TRUE ;
#line 1490 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1491 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1494 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D avTranslation  [ 3 ];
#line 1495 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
avTranslation  [ 0 ] = en_vGravityDir  * - fStairsHeight ;
#line 1496 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
avTranslation  [ 1 ] = vTranslationHorizontal ;
#line 1497 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
avTranslation  [ 2 ] = en_vGravityDir  * fStairsHeight ;
#line 1500 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
for(INDEX iStep  = 0;iStep  < 3;iStep  ++){
#line 1501 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
BOOL bStepOK  = TRUE ;
#line 1503 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vNextPosition  = en_plPlacement  . pl_PositionVector  + avTranslation  [ iStep  ];
#line 1504 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_mNextRotation  = en_mRotation ;
#line 1506 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CClipMove  cm  (this );
#line 1507 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_pwoWorld  -> ClipMove  (cm );
#line 1510 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(cm  . cm_fMovementFraction  < 1.0f){
#line 1512 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
INDEX iSurfaceHit  = 0;
#line 1513 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
BOOL bHitStairsNow  = FALSE ;
#line 1514 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(cm  . cm_pbpoHit  != NULL ){
#line 1515 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
bHitStairsNow  = cm  . cm_pbpoHit  -> bpo_ulFlags  & BPOF_STAIRS ;
#line 1516 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
iSurfaceHit  = cm  . cm_pbpoHit  -> bpo_bppProperties  . bpp_ubSurfaceType ;
#line 1517 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1518 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CSurfaceType  & stHit  = en_pwoWorld  -> wo_astSurfaceTypes  [ iSurfaceHit  ];
#line 1522 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
const FLOAT3D & vHitPlane  = cm  . cm_plClippedPlane ;
#line 1523 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fPlaneDotG  = vHitPlane  % en_vGravityDir ;
#line 1524 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fPlaneDotGAbs  = Abs  (fPlaneDotG );
#line 1526 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
BOOL bSlidingAllowed  = (fPlaneDotGAbs  > - 0.01f && fPlaneDotGAbs  < 0.99f) && bHitStairsOrg ;
#line 1528 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
BOOL bEarlyClipAllowed  = 
#line 1530 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
iStep  == 0 || 
#line 1532 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(iStep  == 1 && bHitStairsNow ) || 
#line 1534 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(iStep  == 2 && 
#line 1535 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(vHitPlane  % en_vGravityDir  < - stHit  . st_fClimbSlopeCos  || 
#line 1536 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
bHitStairsNow ));
#line 1539 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(bEarlyClipAllowed  || bSlidingAllowed ){
#line 1541 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vNextPosition  = en_plPlacement  . pl_PositionVector  + 
#line 1542 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
avTranslation  [ iStep  ] * (cm  . cm_fMovementFraction  * 0.98f);
#line 1543 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(bSlidingAllowed  && iStep  != 2){
#line 1544 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vSliding  = cm  . cm_plClippedPlane  . ProjectDirection  (
#line 1545 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
avTranslation  [ iStep  ] * (1.0f - cm  . cm_fMovementFraction )) + 
#line 1546 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vHitPlane  * (ClampUp  (avTranslation  [ iStep  ] . Length  () , 0.5f) / 100.0f);
#line 1547 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vNextPosition  += vSliding ;
#line 1548 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1549 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CClipMove  cm  (this );
#line 1550 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_pwoWorld  -> ClipMove  (cm );
#line 1552 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(cm  . cm_fMovementFraction  <= 1.0f){
#line 1554 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
bStepOK  = FALSE ;
#line 1555 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1557 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 1559 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
bStepOK  = FALSE ;
#line 1560 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1561 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1564 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(bStepOK ){
#line 1566 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
SetPlacementFromNextPosition  ();
#line 1568 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 1570 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vNextPosition  = plOriginal  . pl_PositionVector ;
#line 1571 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
SetPlacementFromNextPosition  ();
#line 1573 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_TRYTOGOUPSTAIRS );
#line 1575 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return FALSE ;
#line 1576 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1578 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1584 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(! bGettingOutOfWater ){
#line 1585 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vAppliedTranslation  += vTranslationHorizontalOrg ;
#line 1586 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1588 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_TRYTOGOUPSTAIRS );
#line 1590 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return TRUE ;
#line 1591 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  
#line 1594 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
BOOL CMovableEntity::TryToMove(CMovableEntity * penPusher,BOOL bTranslate,BOOL bRotate) 
#line 1595 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 1598 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(penPusher  != NULL ){
#line 1599 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_ctTryToMoveCheckCounter  --;
#line 1600 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 1601 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_ctTryToMoveCheckCounter  -= 4;
#line 1602 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1604 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(_ctTryToMoveCheckCounter  < 0){
#line 1606 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return FALSE ;
#line 1607 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1608 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StartTimer  ((INDEX) CPhysicsProfile  :: PTI_TRYTOTRANSLATE );
#line 1609 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . IncrementTimerAveragingCounter  ((INDEX) CPhysicsProfile  :: PTI_TRYTOTRANSLATE );
#line 1610 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . IncrementCounter  ((INDEX) CPhysicsProfile  :: PCI_TRYTOMOVE );
#line 1613 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(bTranslate ){
#line 1614 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vNextPosition  = en_plPlacement  . pl_PositionVector  + en_vMoveTranslation ;
#line 1631 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 1632 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vNextPosition  = en_plPlacement  . pl_PositionVector ;
#line 1633 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1634 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(bRotate ){
#line 1636 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_mNextRotation  = en_mMoveRotation  * en_mRotation ;
#line 1637 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 1638 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_mNextRotation  = en_mRotation ;
#line 1639 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1642 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ULONG  ulCIFlags  = en_pciCollisionInfo  -> ci_ulFlags ;
#line 1643 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
BOOL bIgnoreRotation  = ! bRotate  || 
#line 1644 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
((ulCIFlags  & CIF_IGNOREROTATION ) || 
#line 1645 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
((ulCIFlags  & CIF_IGNOREHEADING ) && 
#line 1646 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(en_mMoveRotation  (1 , 2) == 0 && en_mMoveRotation  (2 , 2) == 1 && en_mMoveRotation  (3 , 2) == 0)));
#line 1649 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CClipMove  cmMove  (this );
#line 1651 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(! bTranslate  && bIgnoreRotation ){
#line 1652 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
cmMove  . cm_fMovementFraction  = 2.0f;
#line 1653 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . IncrementCounter  ((INDEX) CPhysicsProfile  :: PCI_TRYTOMOVE_FAST );
#line 1654 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 1655 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_pwoWorld  -> ClipMove  (cmMove );
#line 1656 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1659 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(cmMove  . cm_fMovementFraction  > 1.0f){
#line 1663 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(bTranslate  && en_penReference  != NULL  && 
#line 1664 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(en_ulPhysicsFlags  & EPF_TRANSLATEDBYGRAVITY ) && 
#line 1665 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
! (en_ulPhysicsFlags  & (EPF_ONSTEEPSLOPE  | EPF_ORIENTINGTOGRAVITY  | EPF_FLOATING )) && 
#line 1666 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
penPusher  == NULL  && WouldFallInNextPosition  ()){
#line 1668 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
SendEvent  (EWouldFall  ());
#line 1670 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return FALSE ;
#line 1671 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1673 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
SetPlacementFromNextPosition  ();
#line 1674 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(bTranslate ){
#line 1675 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vAppliedTranslation  += en_vMoveTranslation ;
#line 1676 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1677 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(bRotate ){
#line 1678 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_mAppliedRotation  = en_mMoveRotation  * en_mAppliedRotation ;
#line 1679 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1681 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . IncrementCounter  ((INDEX) CPhysicsProfile  :: PCI_TRYTOMOVE_PASS );
#line 1682 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_TRYTOTRANSLATE );
#line 1684 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return TRUE ;
#line 1687 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 1688 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . IncrementCounter  ((INDEX) CPhysicsProfile  :: PCI_TRYTOMOVE_CLIP );
#line 1708 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(_ctTryToMoveCheckCounter  <= 0){
#line 1710 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_TRYTOTRANSLATE );
#line 1711 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return FALSE ;
#line 1712 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1715 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(cmMove  . cm_pbpoHit  != NULL ){
#line 1717 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if((cmMove  . cm_pbpoHit  -> bpo_ulFlags  & BPOF_STAIRS ) 
#line 1718 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
&& ((en_ulPhysicsFlags  & EPF_ONBLOCK_MASK ) == EPF_ONBLOCK_CLIMBORSLIDE )){
#line 1720 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
cmMove  . cm_plClippedPlane  = FLOATplane3D (- en_vGravityDir  , 0);
#line 1721 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1723 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
INDEX iSurface  = cmMove  . cm_pbpoHit  -> bpo_bppProperties  . bpp_ubSurfaceType ;
#line 1724 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_pwoWorld  -> wo_astSurfaceTypes  [ iSurface  ] . st_ulFlags  & STF_NOIMPACT ){
#line 1726 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_ulPhysicsFlags  |= EPF_NOIMPACTTHISTICK ;
#line 1727 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1728 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1732 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if((en_ulPhysicsFlags  & EPF_TRANSLATEDBYGRAVITY ) && ! (en_ulPhysicsFlags  & EPF_FLOATING ) 
#line 1733 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
&& (
#line 1734 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
((en_vGravityDir  % (FLOAT3D &) cmMove  . cm_plClippedPlane ) 
#line 1735 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
< (en_vGravityDir  % en_vReferencePlane )))){
#line 1737 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_penReference  = cmMove  . cm_penHit ;
#line 1739 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vReferencePlane  = (FLOAT3D &) cmMove  . cm_plClippedPlane ;
#line 1740 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_pbpoStandOn  = cmMove  . cm_pbpoHit ;
#line 1741 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(cmMove  . cm_pbpoHit  == NULL ){
#line 1742 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_iReferenceSurface  = 0;
#line 1743 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 1744 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_iReferenceSurface  = cmMove  . cm_pbpoHit  -> bpo_bppProperties  . bpp_ubSurfaceType ;
#line 1745 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1746 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1749 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
SendTouchEvent  (cmMove );
#line 1752 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(cmMove  . cm_penHit  -> en_ulPhysicsFlags  & EPF_NOIMPACT ){
#line 1754 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_ulPhysicsFlags  |= EPF_NOIMPACTTHISTICK ;
#line 1755 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1758 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vBounce ;
#line 1759 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
BOOL bBounce  = FALSE ;
#line 1760 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(((en_ulPhysicsFlags  & EPF_ONBLOCK_MASK ) == EPF_ONBLOCK_BOUNCE ) && bTranslate ){
#line 1762 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vParallel  , vNormal ;
#line 1763 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
GetParallelAndNormalComponents  (en_vMoveTranslation  , cmMove  . cm_plClippedPlane  , 
#line 1764 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vNormal  , vParallel );
#line 1765 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vNormal  *= - en_fBounceDampNormal ;
#line 1766 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vParallel  *= + en_fBounceDampParallel ;
#line 1767 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vBounce  = vNormal  + vParallel ;
#line 1769 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(vNormal  . Length  () > 0.1f){
#line 1771 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
bBounce  = TRUE ;
#line 1772 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1774 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_aDesiredRotationRelative  *= en_fBounceDampParallel ;
#line 1775 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_aDesiredRotationRelative  . Length  () < 10){
#line 1776 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_aDesiredRotationRelative  = ANGLE3D (0 , 0 , 0);
#line 1777 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1778 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1781 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(penPusher  != NULL  && (cmMove  . cm_penHit  -> en_ulPhysicsFlags  & EPF_PUSHABLE )){
#line 1782 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CMovableModelEntity  * penBlocking  = ((CMovableModelEntity  *) cmMove  . cm_penHit );
#line 1784 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vRadius  = cmMove  . cm_penHit  -> en_plPlacement  . pl_PositionVector  - 
#line 1785 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
penPusher  -> en_plPlacement  . pl_PositionVector ;
#line 1786 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vPush  = (vRadius  * penPusher  -> en_mMoveRotation  - vRadius );
#line 1788 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vPush  += penPusher  -> en_vMoveTranslation ;
#line 1791 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
penBlocking  -> en_vMoveTranslation  = vPush ;
#line 1792 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
penBlocking  -> en_mMoveRotation  = penPusher  -> en_mMoveRotation ;
#line 1795 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
penBlocking  -> AddToMoversDuringMoving  ();
#line 1797 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_TRYTOTRANSLATE );
#line 1798 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
BOOL bUnblocked  = penBlocking  -> TryToMove  (penPusher  , bTranslate  , bRotate );
#line 1799 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StartTimer  ((INDEX) CPhysicsProfile  :: PTI_TRYTOTRANSLATE );
#line 1801 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(bUnblocked ){
#line 1803 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ClearNextPosition  ();
#line 1804 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_TRYTOTRANSLATE );
#line 1805 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return TryToMove  (penPusher  , bTranslate  , bRotate );
#line 1806 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 1808 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
SendBlockEvent  (cmMove );
#line 1809 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ClearNextPosition  ();
#line 1810 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_TRYTOTRANSLATE );
#line 1811 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return FALSE ;
#line 1812 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1814 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else if(
#line 1815 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
((en_ulPhysicsFlags  & EPF_ONBLOCK_MASK ) == EPF_ONBLOCK_SLIDE ) || 
#line 1816 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
((en_ulPhysicsFlags  & EPF_ONBLOCK_MASK ) == EPF_ONBLOCK_BOUNCE ) || 
#line 1817 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
((en_ulPhysicsFlags  & EPF_ONBLOCK_MASK ) == EPF_ONBLOCK_CLIMBORSLIDE ) || 
#line 1818 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
((en_ulPhysicsFlags  & EPF_ONBLOCK_MASK ) == EPF_ONBLOCK_STOPEXACT )){
#line 1821 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(bTranslate ){
#line 1824 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vSliding ;
#line 1826 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(_ctSliding  == 0){
#line 1828 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_vSlideOffDir  = cmMove  . cm_plClippedPlane ;
#line 1830 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vSliding  = cmMove  . cm_plClippedPlane  . ProjectDirection  (
#line 1831 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vMoveTranslation  * (1.0f - cmMove  . cm_fMovementFraction ));
#line 1832 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_ctSliding  ++;
#line 1834 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else if(_ctSliding  == 1){
#line 1836 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_vSlideOffDir  += cmMove  . cm_plClippedPlane ;
#line 1838 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_vSlideDir  = _vSlideOffDir  * (FLOAT3D &) cmMove  . cm_plClippedPlane ;
#line 1839 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(_vSlideDir  . Length  () > 0.001f){
#line 1840 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_vSlideDir  . Normalize  ();
#line 1841 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1842 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_ctSliding  ++;
#line 1844 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
GetParallelComponent  (en_vMoveTranslation  * (1.0f - cmMove  . cm_fMovementFraction ) , 
#line 1845 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_vSlideDir  , vSliding );
#line 1847 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 1849 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_vSlideOffDir  += cmMove  . cm_plClippedPlane ;
#line 1851 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_vSlideDir  = cmMove  . cm_plClippedPlane  . ProjectDirection  (_vSlideDir );
#line 1852 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_ctSliding  ++;
#line 1854 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
GetParallelComponent  (en_vMoveTranslation  * (1.0f - cmMove  . cm_fMovementFraction ) , 
#line 1855 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_vSlideDir  , vSliding );
#line 1856 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1857 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ASSERT  (IsValidFloat  (vSliding  (1)));
#line 1858 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ASSERT  (IsValidFloat  (_vSlideDir  (1)));
#line 1859 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ASSERT  (IsValidFloat  (_vSlideOffDir  (1)));
#line 1862 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(cmMove  . cm_pbpoHit  != NULL ){
#line 1863 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CSurfaceType  & stHit  = en_pwoWorld  -> wo_astSurfaceTypes  [ 
#line 1864 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
cmMove  . cm_pbpoHit  -> bpo_bppProperties  . bpp_ubSurfaceType  ];
#line 1866 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(penPusher  == NULL  
#line 1867 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
&& (en_ulPhysicsFlags  & EPF_ONBLOCK_MASK ) == EPF_ONBLOCK_CLIMBORSLIDE ){
#line 1875 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D & vHitPlane  = (FLOAT3D &) cmMove  . cm_plClippedPlane ;
#line 1876 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
BOOL bHitStairs  = cmMove  . cm_pbpoHit  -> bpo_ulFlags  & BPOF_STAIRS ;
#line 1879 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if((vHitPlane  % en_vGravityDir  > - stHit  . st_fClimbSlopeCos ) 
#line 1880 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
|| bHitStairs ){
#line 1883 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fSlidingVertical2  = en_vMoveTranslation  % en_vGravityDir ;
#line 1884 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
fSlidingVertical2  *= fSlidingVertical2 ;
#line 1885 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fSliding2  = en_vMoveTranslation  % en_vMoveTranslation ;
#line 1886 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if((2 * fSlidingVertical2  <= fSliding2 ) 
#line 1888 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
&& TryToGoUpstairs  (en_vMoveTranslation  , stHit  , bHitStairs )){
#line 1890 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_TRYTOTRANSLATE );
#line 1891 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return FALSE ;
#line 1892 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1893 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1894 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1895 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1897 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if((en_ulPhysicsFlags  & EPF_ONBLOCK_MASK ) == EPF_ONBLOCK_STOPEXACT ){
#line 1899 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vSliding  = FLOAT3D (0 , 0 , 0);
#line 1900 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1902 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ASSERT  (IsValidFloat  (vSliding  (1)));
#line 1905 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vSliding  += _vSlideOffDir  * 
#line 1906 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(ClampUp  (en_vMoveTranslation  . Length  () , 0.5f) / 100.0f);
#line 1909 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_vMoveTranslation  . Length  () > 0.001f && cmMove  . cm_fMovementFraction  > 0.002f){
#line 1911 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vSliding  += en_vMoveTranslation  * (cmMove  . cm_fMovementFraction  * 0.98f);
#line 1912 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1915 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(vSliding  . ManhattanNorm  () < 0.001f){
#line 1916 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_TRYTOTRANSLATE );
#line 1917 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return FALSE ;
#line 1918 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1921 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vMoveTranslation  = vSliding ;
#line 1922 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ClearNextPosition  ();
#line 1923 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_TRYTOTRANSLATE );
#line 1924 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
TryToMove  (penPusher  , bTranslate  , bRotate );
#line 1926 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(bBounce ){
#line 1928 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vAppliedTranslation  = vBounce ;
#line 1930 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_penReference  = NULL ;
#line 1931 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vReferencePlane  = FLOAT3D (0.0f , 0.0f , 0.0f);
#line 1932 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_iReferenceSurface  = 0;
#line 1933 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1936 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return FALSE ;
#line 1939 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else if(bRotate ){
#line 1941 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if((en_ulPhysicsFlags  & EPF_ONBLOCK_MASK ) == EPF_ONBLOCK_BOUNCE ){
#line 1943 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_aDesiredRotationRelative  *= en_fBounceDampParallel ;
#line 1944 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_aDesiredRotationRelative  . Length  () < 10){
#line 1945 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_aDesiredRotationRelative  = ANGLE3D (0 , 0 , 0);
#line 1946 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1947 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_TRYTOTRANSLATE );
#line 1949 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return FALSE ;
#line 1950 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1952 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vMoveTranslation  = cmMove  . cm_vClippedLine  * - 1.2f;
#line 1954 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ClearNextPosition  ();
#line 1955 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_TRYTOTRANSLATE );
#line 1956 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
TryToMove  (penPusher  , TRUE  , bRotate );
#line 1958 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return FALSE ;
#line 1959 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1961 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_TRYTOTRANSLATE );
#line 1962 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return FALSE ;
#line 1965 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 1967 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
SendBlockEvent  (cmMove );
#line 1968 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ClearNextPosition  ();
#line 1969 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_TRYTOTRANSLATE );
#line 1970 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return FALSE ;
#line 1971 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1972 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 1973 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  void CMovableEntity::ClearMovingTemp(void) 
#line 1997 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 2001 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ClearNextPosition  ();
#line 2002 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CLEARMEM  (en_vMoveTranslation );
#line 2003 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CLEARMEM  (en_mMoveRotation );
#line 2004 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CLEARMEM  (en_vAppliedTranslation );
#line 2005 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CLEARMEM  (en_mAppliedRotation );
#line 2006 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  void CMovableEntity::PreMoving(void) 
#line 2010 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 2019 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(_pNetwork  -> ga_ulDemoMinorVersion  <= 5){
#line 2020 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
PreMovingOld  ();
#line 2021 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 2022 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
PreMovingNew  ();
#line 2023 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2024 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  
#line 2025 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
void CMovableEntity::PreMovingNew(void) 
#line 2026 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 2027 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_pciCollisionInfo  == NULL ){
#line 2028 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return ;
#line 2029 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2035 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StartTimer  ((INDEX) CPhysicsProfile  :: PTI_PREMOVING );
#line 2036 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . IncrementTimerAveragingCounter  ((INDEX) CPhysicsProfile  :: PTI_PREMOVING );
#line 2039 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_plLastPlacement  = en_plPlacement ;
#line 2042 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{FOREACHINLIST  (CEntity  , en_lnInParent  , en_lhChildren  , itenChild ){
#line 2044 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if((itenChild  -> en_ulPhysicsFlags  & EPF_MOVABLE ) 
#line 2045 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
&& ! ((CMovableEntity  *) & * itenChild ) -> en_lnInMovers  . IsLinked  ()){
#line 2046 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CMovableEntity  * penChild  = ((CMovableEntity  *) & * itenChild );
#line 2048 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
penChild  -> en_plLastPlacement  = penChild  -> en_plPlacement ;
#line 2049 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2050 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}}
#line 2052 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fTickQuantum  = _pTimer  -> TickQuantum ;
#line 2055 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(dbg_bBreak ){
#line 2056 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
dbg_bBreak  = FALSE ;
#line 2057 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
try {
#line 2058 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
Breakpoint  ();
#line 2059 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}catch  (ANYEXCEPTION ){
#line 2060 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CPrintF  ("Breakpoint!\n");
#line 2061 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
};
#line 2062 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2070 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
const FLOAT fMaxSpeed  = 300.0f;
#line 2071 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vCurrentTranslationAbsolute  (1) = Clamp  (en_vCurrentTranslationAbsolute  (1) , - fMaxSpeed  , + fMaxSpeed );
#line 2072 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vCurrentTranslationAbsolute  (2) = Clamp  (en_vCurrentTranslationAbsolute  (2) , - fMaxSpeed  , + fMaxSpeed );
#line 2073 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vCurrentTranslationAbsolute  (3) = Clamp  (en_vCurrentTranslationAbsolute  (3) , - fMaxSpeed  , + fMaxSpeed );
#line 2076 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_RenderType  == RT_MODEL  || en_RenderType  == RT_EDITORMODEL  || 
#line 2077 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_RenderType  == RT_SKAMODEL  || en_RenderType  == RT_SKAEDITORMODEL ){
#line 2079 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
TestFields  (en_iUpContent  , en_iDnContent  , en_fImmersionFactor );
#line 2081 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_ulPhysicsFlags  & EPF_STICKYFEET ){
#line 2083 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vPoint ;
#line 2084 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOATplane3D plPlane ;
#line 2085 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fDistanceToEdge ;
#line 2086 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(GetNearestPolygon  (vPoint  , plPlane  , fDistanceToEdge )){
#line 2087 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vGravityDir  = - (FLOAT3D &) plPlane ;
#line 2088 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2089 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2090 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2091 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CContentType  & ctDn  = en_pwoWorld  -> wo_actContentTypes  [ en_iDnContent  ];
#line 2092 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CContentType  & ctUp  = en_pwoWorld  -> wo_actContentTypes  [ en_iUpContent  ];
#line 2095 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
TestBreathing  (ctUp );
#line 2097 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
TestContentDamage  (ctDn  , en_fImmersionFactor );
#line 2099 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_penReference  != NULL ){
#line 2100 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CSurfaceType  & stReference  = en_pwoWorld  -> wo_astSurfaceTypes  [ en_iReferenceSurface  ];
#line 2101 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
TestSurfaceDamage  (stReference );
#line 2102 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2105 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fBouyancy  = (1 - 
#line 2106 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(ctDn  . ct_fDensity  / en_fDensity ) * en_fImmersionFactor  - 
#line 2107 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(ctUp  . ct_fDensity  / en_fDensity ) * (1 - en_fImmersionFactor ));
#line 2108 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fSpeedModifier  = 
#line 2109 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ctDn  . ct_fSpeedMultiplier  * en_fImmersionFactor  + 
#line 2110 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ctUp  . ct_fSpeedMultiplier  * (1 - en_fImmersionFactor );
#line 2111 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fFluidFriction  = 
#line 2112 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ctDn  . ct_fFluidFriction  * en_fImmersionFactor  + 
#line 2113 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ctUp  . ct_fFluidFriction  * (1 - en_fImmersionFactor );
#line 2114 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fControlMultiplier  = 
#line 2115 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ctDn  . ct_fControlMultiplier  * en_fImmersionFactor  + 
#line 2116 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ctUp  . ct_fControlMultiplier  * (1 - en_fImmersionFactor );
#line 2119 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vDesiredTranslationAbsolute  = en_vDesiredTranslationRelative ;
#line 2121 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(! (en_ulPhysicsFlags  & EPF_ABSOLUTETRANSLATE )){
#line 2122 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vDesiredTranslationAbsolute  *= en_mRotation ;
#line 2123 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2125 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vDesiredTranslationAbsolute  *= fTickQuantum ;
#line 2126 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ANGLE3D aRotationRelative ;
#line 2127 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
aRotationRelative  (1) = en_aDesiredRotationRelative  (1) * fTickQuantum ;
#line 2128 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
aRotationRelative  (2) = en_aDesiredRotationRelative  (2) * fTickQuantum ;
#line 2129 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
aRotationRelative  (3) = en_aDesiredRotationRelative  (3) * fTickQuantum ;
#line 2131 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOATmatrix3D mRotationAbsolute ;
#line 2133 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if((en_ulPhysicsFlags  & EPF_ONBLOCK_MASK ) == EPF_ONBLOCK_PUSH ){
#line 2134 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOATmatrix3D mNewRotation ;
#line 2135 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
MakeRotationMatrixFast  (mNewRotation  , en_plPlacement  . pl_OrientationAngle  + aRotationRelative );
#line 2136 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
mRotationAbsolute  = mNewRotation  * ! en_mRotation ;
#line 2138 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 2139 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
MakeRotationMatrixFast  (mRotationAbsolute  , aRotationRelative );
#line 2140 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
mRotationAbsolute  = en_mRotation  * (mRotationAbsolute  * ! en_mRotation );
#line 2141 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2144 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vDesiredTranslationAbsolute  *= fSpeedModifier ;
#line 2147 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fJump  = - en_mRotation  . GetColumn  (2) % vDesiredTranslationAbsolute ;
#line 2149 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
BOOL bReferenceMovingInY  = FALSE ;
#line 2150 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
BOOL bReferenceRotatingNonY  = FALSE ;
#line 2152 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_penReference  != NULL  && (en_penReference  -> en_ulPhysicsFlags  & EPF_MOVABLE )){
#line 2153 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CMovableEntity  * penReference  = (CMovableEntity  *) (CEntity  *) en_penReference ;
#line 2155 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
const FLOAT3D & vReferenceTranslation  = penReference  -> en_vIntendedTranslation ;
#line 2156 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
const FLOATmatrix3D & mReferenceRotation  = penReference  -> en_mIntendedRotation ;
#line 2158 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vRadius  = en_plPlacement  . pl_PositionVector  
#line 2159 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
- penReference  -> en_plPlacement  . pl_PositionVector ;
#line 2160 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vReferenceDelta  = vReferenceTranslation  + vRadius  * mReferenceRotation  - vRadius ;
#line 2162 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vDesiredTranslationAbsolute  += vReferenceDelta ;
#line 2163 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
mRotationAbsolute  = mReferenceRotation  * mRotationAbsolute ;
#line 2166 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
bReferenceMovingInY  = (vReferenceDelta  % en_vGravityDir  != 0.0f);
#line 2167 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
bReferenceRotatingNonY  = ((en_vGravityDir  * mReferenceRotation ) % en_vGravityDir ) > 0.01f;
#line 2168 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2170 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vTranslationAbsolute  = en_vCurrentTranslationAbsolute  * fTickQuantum ;
#line 2173 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_ulPhysicsFlags  &= ~ EPF_ORIENTINGTOGRAVITY ;
#line 2175 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_ulPhysicsFlags  & EPF_ORIENTEDBYGRAVITY ){
#line 2177 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vDown ;
#line 2178 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vDown  (1) = - en_mRotation  (1 , 2);
#line 2179 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vDown  (2) = - en_mRotation  (2 , 2);
#line 2180 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vDown  (3) = - en_mRotation  (3 , 2);
#line 2183 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fCos  = vDown  % en_vGravityDir ;
#line 2185 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(fCos  < 0.99999f){
#line 2187 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_ulPhysicsFlags  |= EPF_ORIENTINGTOGRAVITY ;
#line 2190 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ANGLE a  = ACos  (fCos );
#line 2191 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(Abs  (a ) > 20){
#line 2192 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
a  = 20 * Sgn  (a );
#line 2193 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2194 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fRad  = RadAngle  (a );
#line 2197 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vAxis  = vDown  * en_vGravityDir ;
#line 2198 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fLen  = vAxis  . Length  ();
#line 2199 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(fLen  < 0.01f){
#line 2200 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vAxis  (1) = en_mRotation  (1 , 3);
#line 2201 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vAxis  (2) = en_mRotation  (2 , 3);
#line 2202 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vAxis  (3) = en_mRotation  (3 , 3);
#line 2205 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else if(! bReferenceRotatingNonY ){
#line 2206 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
fRad  /= fLen ;
#line 2207 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2208 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vAxis  *= fRad ;
#line 2211 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOATmatrix3D mGRotation ;
#line 2212 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
mGRotation  (1 , 1) = 1;mGRotation  (1 , 2) = - vAxis  (3);mGRotation  (1 , 3) = vAxis  (2);
#line 2213 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
mGRotation  (2 , 1) = vAxis  (3);mGRotation  (2 , 2) = 1;mGRotation  (2 , 3) = - vAxis  (1);
#line 2214 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
mGRotation  (3 , 1) = - vAxis  (2);mGRotation  (3 , 2) = vAxis  (1);mGRotation  (3 , 3) = 1;
#line 2215 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
OrthonormalizeRotationMatrix  (mGRotation );
#line 2218 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
mRotationAbsolute  = mGRotation  * mRotationAbsolute ;
#line 2219 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2220 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2223 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_ulPhysicsFlags  &= ~ EPF_FLOATING ;
#line 2225 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT ACC  = en_fAcceleration  * fTickQuantum  * fTickQuantum ;
#line 2226 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT DEC  = en_fDeceleration  * fTickQuantum  * fTickQuantum ;
#line 2228 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(! (en_ulPhysicsFlags  & EPF_TRANSLATEDBYGRAVITY )){
#line 2230 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_ulPhysicsFlags  & EPF_NOACCELERATION ){
#line 2231 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vTranslationAbsolute  = vDesiredTranslationAbsolute ;
#line 2232 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 2233 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddAcceleration  (vTranslationAbsolute  , vDesiredTranslationAbsolute  , 
#line 2234 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ACC  * fControlMultiplier  , 
#line 2235 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
DEC  * fControlMultiplier );
#line 2236 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2238 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else if((fBouyancy  * en_fGravityA  < 0.5f && (ctDn  . ct_ulFlags  & (CTF_SWIMABLE  | CTF_FLYABLE )))){
#line 2240 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_ulPhysicsFlags  |= EPF_FLOATING ;
#line 2242 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_ulPhysicsFlags  & EPF_NOACCELERATION ){
#line 2243 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vTranslationAbsolute  = vDesiredTranslationAbsolute ;
#line 2244 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 2245 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddAcceleration  (vTranslationAbsolute  , vDesiredTranslationAbsolute  , 
#line 2246 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ACC  * fControlMultiplier  , 
#line 2247 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
DEC  * fControlMultiplier );
#line 2248 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2251 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(fBouyancy  < - 0.1f){
#line 2252 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fGV  = en_fGravityV  * fTickQuantum  * fSpeedModifier ;
#line 2253 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fGA  = (en_fGravityA  * - fBouyancy ) * fTickQuantum  * fTickQuantum ;
#line 2254 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddAcceleration  (vTranslationAbsolute  , en_vGravityDir  * - fGV  , fGA  , fGA );
#line 2255 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else if(fBouyancy  > + 0.1f){
#line 2256 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fGV  = en_fGravityV  * fTickQuantum  * fSpeedModifier ;
#line 2257 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fGA  = (en_fGravityA  * fBouyancy ) * fTickQuantum  * fTickQuantum ;
#line 2258 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddAcceleration  (vTranslationAbsolute  , en_vGravityDir  * fGV  , fGA  , fGA );
#line 2259 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2262 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 2263 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
BOOL bGravityAlongPolygon  = TRUE ;
#line 2265 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_pbpoStandOn  == NULL  || ! IsStandingOnPolygon  (en_pbpoStandOn ) || bReferenceMovingInY  
#line 2266 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
|| (en_ulPhysicsFlags  & EPF_ORIENTINGTOGRAVITY )){
#line 2268 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_pbpoStandOn  = NULL ;
#line 2269 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_penReference  == NULL  || bReferenceMovingInY ){
#line 2270 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
bGravityAlongPolygon  = FALSE ;
#line 2271 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2272 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2275 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(! bGravityAlongPolygon ){
#line 2276 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . IncrementCounter  ((INDEX) CPhysicsProfile  :: PCI_GRAVITY_NONTRIVIAL );
#line 2279 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fGV  = en_fGravityV  * fTickQuantum  * fSpeedModifier ;
#line 2280 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fGA  = (en_fGravityA  * fBouyancy ) * fTickQuantum  * fTickQuantum ;
#line 2281 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddGAcceleration  (vTranslationAbsolute  , en_vGravityDir  , fGA  , fGV );
#line 2283 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 2284 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . IncrementCounter  ((INDEX) CPhysicsProfile  :: PCI_GRAVITY_TRIVIAL );
#line 2287 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vPolygonDir  = - en_vReferencePlane ;
#line 2289 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vGParallel  , vGNormal ;
#line 2290 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
GetParallelAndNormalComponents  (en_vGravityDir  , vPolygonDir  , vGNormal  , vGParallel );
#line 2292 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fFactor  = vGParallel  . Length  ();
#line 2294 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(fFactor  > 0.001f){
#line 2295 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fGV  = en_fGravityV  * fTickQuantum  * fSpeedModifier ;
#line 2296 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fGA  = (en_fGravityA  * fBouyancy ) * fTickQuantum  * fTickQuantum ;
#line 2297 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddGAcceleration  (vTranslationAbsolute  , vGParallel  / fFactor  , fGA  * fFactor  , fGV  * fFactor );
#line 2298 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2301 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fPolyGA  = (vPolygonDir  % en_vGravityDir ) * en_fGravityA ;
#line 2302 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fYSpeed  = vPolygonDir  % vTranslationAbsolute ;
#line 2303 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(fYSpeed  > 0 && fYSpeed  < fPolyGA ){
#line 2304 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vTranslationAbsolute  -= vPolygonDir  * fYSpeed ;
#line 2305 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2308 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if((en_ulPhysicsFlags  & EPF_ONBLOCK_MASK ) == EPF_ONBLOCK_BOUNCE ){
#line 2310 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_aDesiredRotationRelative  *= en_fJumpControlMultiplier ;
#line 2311 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_aDesiredRotationRelative  . Length  () < 10){
#line 2312 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_aDesiredRotationRelative  = ANGLE3D (0 , 0 , 0);
#line 2313 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2314 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2315 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2317 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CSurfaceType  & stReference  = en_pwoWorld  -> wo_astSurfaceTypes  [ en_iReferenceSurface  ];
#line 2320 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_penReference  != NULL ){
#line 2321 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fPlaneY  = (en_vGravityDir  % en_vReferencePlane );
#line 2322 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fPlaneYAbs  = Abs  (fPlaneY );
#line 2323 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fFriction  = stReference  . st_fFriction ;
#line 2325 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if((fPlaneY  >= - stReference  . st_fClimbSlopeCos  && fPlaneY  < 0) 
#line 2326 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
|| ((stReference  . st_ulFlags  & STF_SLIDEDOWNSLOPE ) && fPlaneY  > - 0.99f)){
#line 2327 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_ulPhysicsFlags  |= EPF_ONSTEEPSLOPE ;
#line 2329 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddAccelerationOnPlane2  (
#line 2330 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vTranslationAbsolute  , 
#line 2331 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vDesiredTranslationAbsolute  , 
#line 2332 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ACC  * fPlaneYAbs  * fPlaneYAbs  * fFriction  * fControlMultiplier  , 
#line 2333 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
DEC  * fPlaneYAbs  * fPlaneYAbs  * fFriction  * fControlMultiplier  , 
#line 2334 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vReferencePlane  , 
#line 2335 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vGravityDir );
#line 2337 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 2338 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_ulPhysicsFlags  &= ~ EPF_ONSTEEPSLOPE ;
#line 2340 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddAccelerationOnPlane  (
#line 2341 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vTranslationAbsolute  , 
#line 2342 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vDesiredTranslationAbsolute  , 
#line 2343 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ACC  * fPlaneYAbs  * fPlaneYAbs  * fFriction  * fControlMultiplier  , 
#line 2344 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
DEC  * fPlaneYAbs  * fPlaneYAbs  * fFriction  * fControlMultiplier  , 
#line 2345 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vReferencePlane );
#line 2346 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2348 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(fJump  < - 0.01f && (fPlaneY  < - stReference  . st_fJumpSlopeCos  
#line 2349 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
|| _pTimer  -> CurrentTick  () > en_tmLastSignificantVerticalMovement  + 0.25f)){
#line 2351 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vTranslationAbsolute  += en_vGravityDir  * fJump ;
#line 2352 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_tmJumped  = _pTimer  -> CurrentTick  ();
#line 2353 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_pbpoStandOn  = NULL ;
#line 2354 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2357 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 2359 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(_pTimer  -> CurrentTick  () - en_tmJumped  < en_tmMaxJumpControl ){
#line 2361 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddAccelerationOnPlane  (
#line 2362 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vTranslationAbsolute  , 
#line 2363 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vDesiredTranslationAbsolute  , 
#line 2364 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ACC  * fControlMultiplier  * en_fJumpControlMultiplier  , 
#line 2365 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
DEC  * fControlMultiplier  * en_fJumpControlMultiplier  , 
#line 2366 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOATplane3D (en_vGravityDir  , 0));
#line 2367 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2370 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(fJump  < - 0.01f && 
#line 2371 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pTimer  -> CurrentTick  () > en_tmLastSignificantVerticalMovement  + 0.25f){
#line 2373 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vTranslationAbsolute  += en_vGravityDir  * fJump ;
#line 2374 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_tmJumped  = _pTimer  -> CurrentTick  ();
#line 2375 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_pbpoStandOn  = NULL ;
#line 2376 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2377 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2378 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2382 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CheckAndAddGAcceleration  (this  , vTranslationAbsolute  , fTickQuantum );
#line 2385 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(fFluidFriction  > 0.01f){
#line 2387 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddAcceleration  (vTranslationAbsolute  , FLOAT3D (0.0f , 0.0f , 0.0f) , 
#line 2388 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
0.0f , DEC  * fFluidFriction );
#line 2389 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2392 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if((en_ulPhysicsFlags  & EPF_CANFADESPINNING ) && 
#line 2393 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
((ctDn  . ct_ulFlags  & CTF_FADESPINNING ) || (ctUp  . ct_ulFlags  & CTF_FADESPINNING ))){
#line 2395 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_aDesiredRotationRelative  *= (1 - fSpeedModifier  * 0.05f);
#line 2396 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_aDesiredRotationRelative  . Length  () < 10){
#line 2397 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_aDesiredRotationRelative  = ANGLE3D (0 , 0 , 0);
#line 2398 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2399 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2402 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_pbpoStandOn  == NULL  && (vTranslationAbsolute  . ManhattanNorm  () > 1E-5f || 
#line 2403 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vReferencePlane  % en_vGravityDir  < 0.0f)){
#line 2404 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_penReference  = NULL ;
#line 2405 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vReferencePlane  = FLOAT3D (0.0f , 0.0f , 0.0f);
#line 2406 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_iReferenceSurface  = 0;
#line 2407 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2409 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vIntendedTranslation  = vTranslationAbsolute ;
#line 2410 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_mIntendedRotation  = mRotationAbsolute ;
#line 2415 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOATaabbox3D box ;
#line 2416 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_pciCollisionInfo  -> MakeBoxAtPlacement  (FLOAT3D (0 , 0 , 0) , en_mRotation  , box );
#line 2418 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{CLightSource  * pls  = GetLightSource  ();
#line 2419 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(pls  != NULL  && ! (pls  -> ls_ulFlags  & LSF_LENSFLAREONLY )){
#line 2421 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ASSERT  (! (pls  -> ls_ulFlags  & LSF_DIRECTIONAL ));
#line 2422 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
box  |= FLOATaabbox3D (FLOAT3D (0 , 0 , 0) , pls  -> ls_rFallOff );
#line 2423 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}}
#line 2425 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
box  . ExpandByFactor  (phy_fCollisionCacheAround  - 1.0f);
#line 2427 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
box  += en_plPlacement  . pl_PositionVector ;
#line 2428 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_boxMovingEstimate  = box ;
#line 2429 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
box  += en_vIntendedTranslation  * phy_fCollisionCacheAhead ;
#line 2430 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_boxMovingEstimate  |= box ;
#line 2433 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vAppliedTranslation  = FLOAT3D (0.0f , 0.0f , 0.0f);
#line 2434 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_mAppliedRotation  . Diagonal  (1.0f);
#line 2435 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_PREMOVING );
#line 2437 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  
#line 2441 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
void CMovableEntity::PreMovingOld(void) 
#line 2442 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 2443 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_pciCollisionInfo  == NULL ){
#line 2444 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return ;
#line 2445 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2451 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StartTimer  (CPhysicsProfile  :: PTI_PREMOVING );
#line 2452 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . IncrementTimerAveragingCounter  (CPhysicsProfile  :: PTI_PREMOVING );
#line 2455 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_plLastPlacement  = en_plPlacement ;
#line 2458 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{FOREACHINLIST  (CEntity  , en_lnInParent  , en_lhChildren  , itenChild ){
#line 2460 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if((itenChild  -> en_ulPhysicsFlags  & EPF_MOVABLE ) 
#line 2461 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
&& ! ((CMovableEntity  *) & * itenChild ) -> en_lnInMovers  . IsLinked  ()){
#line 2462 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CMovableEntity  * penChild  = ((CMovableEntity  *) & * itenChild );
#line 2464 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
penChild  -> en_plLastPlacement  = penChild  -> en_plPlacement ;
#line 2465 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2466 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}}
#line 2468 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fTickQuantum  = _pTimer  -> TickQuantum ;
#line 2471 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(dbg_bBreak ){
#line 2472 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
dbg_bBreak  = FALSE ;
#line 2473 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
try {
#line 2474 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
Breakpoint  ();
#line 2475 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}catch  (ANYEXCEPTION ){
#line 2476 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CPrintF  ("Breakpoint!\n");
#line 2477 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
};
#line 2478 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2486 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
const FLOAT fMaxSpeed  = 300.0f;
#line 2487 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vCurrentTranslationAbsolute  (1) = Clamp  (en_vCurrentTranslationAbsolute  (1) , - fMaxSpeed  , + fMaxSpeed );
#line 2488 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vCurrentTranslationAbsolute  (2) = Clamp  (en_vCurrentTranslationAbsolute  (2) , - fMaxSpeed  , + fMaxSpeed );
#line 2489 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vCurrentTranslationAbsolute  (3) = Clamp  (en_vCurrentTranslationAbsolute  (3) , - fMaxSpeed  , + fMaxSpeed );
#line 2492 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_RenderType  == RT_MODEL  || en_RenderType  == RT_EDITORMODEL ){
#line 2494 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
TestFields  (en_iUpContent  , en_iDnContent  , en_fImmersionFactor );
#line 2496 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_ulPhysicsFlags  & EPF_STICKYFEET ){
#line 2498 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vPoint ;
#line 2499 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOATplane3D plPlane ;
#line 2500 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fDistanceToEdge ;
#line 2501 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(GetNearestPolygon  (vPoint  , plPlane  , fDistanceToEdge )){
#line 2502 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vGravityDir  = - (FLOAT3D &) plPlane ;
#line 2503 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2504 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2505 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2506 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CContentType  & ctDn  = en_pwoWorld  -> wo_actContentTypes  [ en_iDnContent  ];
#line 2507 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CContentType  & ctUp  = en_pwoWorld  -> wo_actContentTypes  [ en_iUpContent  ];
#line 2510 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
TestBreathing  (ctUp );
#line 2512 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
TestContentDamage  (ctDn  , en_fImmersionFactor );
#line 2514 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_penReference  != NULL ){
#line 2515 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CSurfaceType  & stReference  = en_pwoWorld  -> wo_astSurfaceTypes  [ en_iReferenceSurface  ];
#line 2516 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
TestSurfaceDamage  (stReference );
#line 2517 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2520 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fBouyancy  = (1 - 
#line 2521 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(ctDn  . ct_fDensity  / en_fDensity ) * en_fImmersionFactor  - 
#line 2522 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(ctUp  . ct_fDensity  / en_fDensity ) * (1 - en_fImmersionFactor ));
#line 2523 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fSpeedModifier  = 
#line 2524 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ctDn  . ct_fSpeedMultiplier  * en_fImmersionFactor  + 
#line 2525 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ctUp  . ct_fSpeedMultiplier  * (1 - en_fImmersionFactor );
#line 2526 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fFluidFriction  = 
#line 2527 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ctDn  . ct_fFluidFriction  * en_fImmersionFactor  + 
#line 2528 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ctUp  . ct_fFluidFriction  * (1 - en_fImmersionFactor );
#line 2529 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fControlMultiplier  = 
#line 2530 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ctDn  . ct_fControlMultiplier  * en_fImmersionFactor  + 
#line 2531 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ctUp  . ct_fControlMultiplier  * (1 - en_fImmersionFactor );
#line 2534 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vDesiredTranslationAbsolute  = en_vDesiredTranslationRelative ;
#line 2536 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(! (en_ulPhysicsFlags  & EPF_ABSOLUTETRANSLATE )){
#line 2537 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vDesiredTranslationAbsolute  *= en_mRotation ;
#line 2538 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2540 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vDesiredTranslationAbsolute  *= fTickQuantum ;
#line 2541 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ANGLE3D aRotationRelative ;
#line 2542 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
aRotationRelative  (1) = en_aDesiredRotationRelative  (1) * fTickQuantum ;
#line 2543 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
aRotationRelative  (2) = en_aDesiredRotationRelative  (2) * fTickQuantum ;
#line 2544 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
aRotationRelative  (3) = en_aDesiredRotationRelative  (3) * fTickQuantum ;
#line 2546 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOATmatrix3D mRotationAbsolute ;
#line 2548 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if((en_ulPhysicsFlags  & EPF_ONBLOCK_MASK ) == EPF_ONBLOCK_PUSH ){
#line 2549 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOATmatrix3D mNewRotation ;
#line 2550 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
MakeRotationMatrixFast  (mNewRotation  , en_plPlacement  . pl_OrientationAngle  + aRotationRelative );
#line 2551 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
mRotationAbsolute  = mNewRotation  * ! en_mRotation ;
#line 2553 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 2554 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
MakeRotationMatrixFast  (mRotationAbsolute  , aRotationRelative );
#line 2555 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
mRotationAbsolute  = en_mRotation  * (mRotationAbsolute  * ! en_mRotation );
#line 2556 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2559 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vDesiredTranslationAbsolute  *= fSpeedModifier ;
#line 2562 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fJump  = - en_mRotation  . GetColumn  (2) % vDesiredTranslationAbsolute ;
#line 2564 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
BOOL bReferenceMovingInY  = FALSE ;
#line 2565 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
BOOL bReferenceRotatingNonY  = FALSE ;
#line 2567 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_penReference  != NULL  && (en_penReference  -> en_ulPhysicsFlags  & EPF_MOVABLE )){
#line 2568 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CMovableEntity  * penReference  = (CMovableEntity  *) (CEntity  *) en_penReference ;
#line 2570 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
const FLOAT3D & vReferenceTranslation  = penReference  -> en_vIntendedTranslation ;
#line 2571 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
const FLOATmatrix3D & mReferenceRotation  = penReference  -> en_mIntendedRotation ;
#line 2573 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vRadius  = en_plPlacement  . pl_PositionVector  
#line 2574 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
- penReference  -> en_plPlacement  . pl_PositionVector ;
#line 2575 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vReferenceDelta  = vReferenceTranslation  + vRadius  * mReferenceRotation  - vRadius ;
#line 2577 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vDesiredTranslationAbsolute  += vReferenceDelta ;
#line 2578 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
mRotationAbsolute  = mReferenceRotation  * mRotationAbsolute ;
#line 2581 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
bReferenceMovingInY  = (vReferenceDelta  % en_vGravityDir  != 0.0f);
#line 2582 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
bReferenceRotatingNonY  = ((en_vGravityDir  * mReferenceRotation ) % en_vGravityDir ) > 0.01f;
#line 2583 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2585 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vTranslationAbsolute  = en_vCurrentTranslationAbsolute  * fTickQuantum ;
#line 2588 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_ulPhysicsFlags  &= ~ EPF_ORIENTINGTOGRAVITY ;
#line 2590 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_ulPhysicsFlags  & EPF_ORIENTEDBYGRAVITY ){
#line 2592 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vDown ;
#line 2593 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vDown  (1) = - en_mRotation  (1 , 2);
#line 2594 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vDown  (2) = - en_mRotation  (2 , 2);
#line 2595 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vDown  (3) = - en_mRotation  (3 , 2);
#line 2598 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fCos  = vDown  % en_vGravityDir ;
#line 2600 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(fCos  < 0.99999f){
#line 2602 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_ulPhysicsFlags  |= EPF_ORIENTINGTOGRAVITY ;
#line 2605 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ANGLE a  = ACos  (fCos );
#line 2606 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(Abs  (a ) > 20){
#line 2607 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
a  = 20 * Sgn  (a );
#line 2608 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2609 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fRad  = RadAngle  (a );
#line 2612 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vAxis  = vDown  * en_vGravityDir ;
#line 2613 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fLen  = vAxis  . Length  ();
#line 2614 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(fLen  < 0.01f){
#line 2615 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vAxis  (1) = en_mRotation  (1 , 3);
#line 2616 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vAxis  (2) = en_mRotation  (2 , 3);
#line 2617 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vAxis  (3) = en_mRotation  (3 , 3);
#line 2620 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else if(! bReferenceRotatingNonY ){
#line 2621 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
fRad  /= fLen ;
#line 2622 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2623 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vAxis  *= fRad ;
#line 2626 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOATmatrix3D mGRotation ;
#line 2627 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
mGRotation  (1 , 1) = 1;mGRotation  (1 , 2) = - vAxis  (3);mGRotation  (1 , 3) = vAxis  (2);
#line 2628 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
mGRotation  (2 , 1) = vAxis  (3);mGRotation  (2 , 2) = 1;mGRotation  (2 , 3) = - vAxis  (1);
#line 2629 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
mGRotation  (3 , 1) = - vAxis  (2);mGRotation  (3 , 2) = vAxis  (1);mGRotation  (3 , 3) = 1;
#line 2630 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
OrthonormalizeRotationMatrix  (mGRotation );
#line 2633 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
mRotationAbsolute  = mGRotation  * mRotationAbsolute ;
#line 2634 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2635 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2638 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_ulPhysicsFlags  &= ~ EPF_FLOATING ;
#line 2640 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT ACC  = en_fAcceleration  * fTickQuantum  * fTickQuantum ;
#line 2641 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT DEC  = en_fDeceleration  * fTickQuantum  * fTickQuantum ;
#line 2643 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(! (en_ulPhysicsFlags  & EPF_TRANSLATEDBYGRAVITY )){
#line 2645 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_ulPhysicsFlags  & EPF_NOACCELERATION ){
#line 2646 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vTranslationAbsolute  = vDesiredTranslationAbsolute ;
#line 2647 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 2648 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddAcceleration  (vTranslationAbsolute  , vDesiredTranslationAbsolute  , 
#line 2649 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ACC  * fControlMultiplier  , 
#line 2650 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
DEC  * fControlMultiplier );
#line 2651 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2653 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else if((fBouyancy  * en_fGravityA  < 0.5f && (ctDn  . ct_ulFlags  & (CTF_SWIMABLE  | CTF_FLYABLE )))){
#line 2655 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_ulPhysicsFlags  |= EPF_FLOATING ;
#line 2657 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_ulPhysicsFlags  & EPF_NOACCELERATION ){
#line 2658 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vTranslationAbsolute  = vDesiredTranslationAbsolute ;
#line 2659 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 2660 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddAcceleration  (vTranslationAbsolute  , vDesiredTranslationAbsolute  , 
#line 2661 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ACC  * fControlMultiplier  , 
#line 2662 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
DEC  * fControlMultiplier );
#line 2663 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2666 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(fBouyancy  < - 0.1f){
#line 2667 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fGV  = en_fGravityV  * fTickQuantum  * fSpeedModifier ;
#line 2668 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fGA  = (en_fGravityA  * - fBouyancy ) * fTickQuantum  * fTickQuantum ;
#line 2669 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddAcceleration  (vTranslationAbsolute  , en_vGravityDir  * - fGV  , fGA  , fGA );
#line 2670 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else if(fBouyancy  > + 0.1f){
#line 2671 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fGV  = en_fGravityV  * fTickQuantum  * fSpeedModifier ;
#line 2672 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fGA  = (en_fGravityA  * fBouyancy ) * fTickQuantum  * fTickQuantum ;
#line 2673 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddAcceleration  (vTranslationAbsolute  , en_vGravityDir  * fGV  , fGA  , fGA );
#line 2674 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2677 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 2678 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
BOOL bGravityAlongPolygon  = TRUE ;
#line 2680 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_pbpoStandOn  == NULL  || ! IsStandingOnPolygon  (en_pbpoStandOn ) || bReferenceMovingInY  
#line 2681 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
|| (en_ulPhysicsFlags  & EPF_ORIENTINGTOGRAVITY )){
#line 2683 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_pbpoStandOn  = NULL ;
#line 2684 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_penReference  == NULL  || bReferenceMovingInY ){
#line 2685 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
bGravityAlongPolygon  = FALSE ;
#line 2686 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2687 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2690 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(! bGravityAlongPolygon ){
#line 2691 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . IncrementCounter  (CPhysicsProfile  :: PCI_GRAVITY_NONTRIVIAL );
#line 2694 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fGV  = en_fGravityV  * fTickQuantum  * fSpeedModifier ;
#line 2695 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fGA  = (en_fGravityA  * fBouyancy ) * fTickQuantum  * fTickQuantum ;
#line 2696 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddGAcceleration  (vTranslationAbsolute  , en_vGravityDir  , fGA  , fGV );
#line 2698 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 2699 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . IncrementCounter  (CPhysicsProfile  :: PCI_GRAVITY_TRIVIAL );
#line 2702 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vPolygonDir  = - en_vReferencePlane ;
#line 2704 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vGParallel  , vGNormal ;
#line 2705 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
GetParallelAndNormalComponents  (en_vGravityDir  , vPolygonDir  , vGNormal  , vGParallel );
#line 2707 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fFactor  = vGParallel  . Length  ();
#line 2709 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(fFactor  > 0.001f){
#line 2710 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fGV  = en_fGravityV  * fTickQuantum  * fSpeedModifier ;
#line 2711 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fGA  = (en_fGravityA  * fBouyancy ) * fTickQuantum  * fTickQuantum ;
#line 2712 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddGAcceleration  (vTranslationAbsolute  , vGParallel  / fFactor  , fGA  * fFactor  , fGV  * fFactor );
#line 2713 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2716 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fPolyGA  = (vPolygonDir  % en_vGravityDir ) * en_fGravityA ;
#line 2717 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fYSpeed  = vPolygonDir  % vTranslationAbsolute ;
#line 2718 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(fYSpeed  > 0 && fYSpeed  < fPolyGA ){
#line 2719 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vTranslationAbsolute  -= vPolygonDir  * fYSpeed ;
#line 2720 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2723 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if((en_ulPhysicsFlags  & EPF_ONBLOCK_MASK ) == EPF_ONBLOCK_BOUNCE ){
#line 2725 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_aDesiredRotationRelative  *= en_fJumpControlMultiplier ;
#line 2726 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_aDesiredRotationRelative  . Length  () < 10){
#line 2727 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_aDesiredRotationRelative  = ANGLE3D (0 , 0 , 0);
#line 2728 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2729 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2730 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2732 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CSurfaceType  & stReference  = en_pwoWorld  -> wo_astSurfaceTypes  [ en_iReferenceSurface  ];
#line 2735 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_penReference  != NULL ){
#line 2736 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fPlaneY  = (en_vGravityDir  % en_vReferencePlane );
#line 2737 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fPlaneYAbs  = Abs  (fPlaneY );
#line 2738 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fFriction  = stReference  . st_fFriction ;
#line 2740 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if((fPlaneY  >= - stReference  . st_fClimbSlopeCos  && fPlaneY  < 0) 
#line 2741 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
|| ((stReference  . st_ulFlags  & STF_SLIDEDOWNSLOPE ) && fPlaneY  > - 0.99f)){
#line 2742 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_ulPhysicsFlags  |= EPF_ONSTEEPSLOPE ;
#line 2744 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddAccelerationOnPlane2  (
#line 2745 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vTranslationAbsolute  , 
#line 2746 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vDesiredTranslationAbsolute  , 
#line 2747 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ACC  * fPlaneYAbs  * fPlaneYAbs  * fFriction  * fControlMultiplier  , 
#line 2748 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
DEC  * fPlaneYAbs  * fPlaneYAbs  * fFriction  * fControlMultiplier  , 
#line 2749 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vReferencePlane  , 
#line 2750 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vGravityDir );
#line 2752 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 2753 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_ulPhysicsFlags  &= ~ EPF_ONSTEEPSLOPE ;
#line 2755 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddAccelerationOnPlane  (
#line 2756 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vTranslationAbsolute  , 
#line 2757 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vDesiredTranslationAbsolute  , 
#line 2758 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ACC  * fPlaneYAbs  * fPlaneYAbs  * fFriction  * fControlMultiplier  , 
#line 2759 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
DEC  * fPlaneYAbs  * fPlaneYAbs  * fFriction  * fControlMultiplier  , 
#line 2760 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vReferencePlane );
#line 2761 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2763 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(fJump  < - 0.01f && (fPlaneY  < - stReference  . st_fJumpSlopeCos  
#line 2764 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
|| _pTimer  -> CurrentTick  () > en_tmLastSignificantVerticalMovement  + 0.25f)){
#line 2766 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vTranslationAbsolute  += en_vGravityDir  * fJump ;
#line 2767 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_tmJumped  = _pTimer  -> CurrentTick  ();
#line 2768 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_pbpoStandOn  = NULL ;
#line 2769 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2772 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 2774 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(_pTimer  -> CurrentTick  () - en_tmJumped  < en_tmMaxJumpControl ){
#line 2776 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddAccelerationOnPlane  (
#line 2777 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vTranslationAbsolute  , 
#line 2778 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vDesiredTranslationAbsolute  , 
#line 2779 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ACC  * fControlMultiplier  * en_fJumpControlMultiplier  , 
#line 2780 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
DEC  * fControlMultiplier  * en_fJumpControlMultiplier  , 
#line 2781 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOATplane3D (en_vGravityDir  , 0));
#line 2782 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2785 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(fJump  < - 0.01f && 
#line 2786 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pTimer  -> CurrentTick  () > en_tmLastSignificantVerticalMovement  + 0.25f){
#line 2788 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
vTranslationAbsolute  += en_vGravityDir  * fJump ;
#line 2789 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_tmJumped  = _pTimer  -> CurrentTick  ();
#line 2790 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_pbpoStandOn  = NULL ;
#line 2791 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2792 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2793 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2797 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CheckAndAddGAcceleration  (this  , vTranslationAbsolute  , fTickQuantum );
#line 2800 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(fFluidFriction  > 0.01f){
#line 2802 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
AddAcceleration  (vTranslationAbsolute  , FLOAT3D (0.0f , 0.0f , 0.0f) , 
#line 2803 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
0.0f , DEC  * fFluidFriction );
#line 2804 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2807 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if((en_ulPhysicsFlags  & EPF_CANFADESPINNING ) && 
#line 2808 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
((ctDn  . ct_ulFlags  & CTF_FADESPINNING ) || (ctUp  . ct_ulFlags  & CTF_FADESPINNING ))){
#line 2810 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_aDesiredRotationRelative  *= (1 - fSpeedModifier  * 0.05f);
#line 2811 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_aDesiredRotationRelative  . Length  () < 10){
#line 2812 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_aDesiredRotationRelative  = ANGLE3D (0 , 0 , 0);
#line 2813 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2814 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2817 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_pbpoStandOn  == NULL ){
#line 2818 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_penReference  = NULL ;
#line 2819 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vReferencePlane  = FLOAT3D (0.0f , 0.0f , 0.0f);
#line 2820 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_iReferenceSurface  = 0;
#line 2821 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2823 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vIntendedTranslation  = vTranslationAbsolute ;
#line 2824 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_mIntendedRotation  = mRotationAbsolute ;
#line 2829 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOATaabbox3D box ;
#line 2830 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_pciCollisionInfo  -> MakeBoxAtPlacement  (FLOAT3D (0 , 0 , 0) , en_mRotation  , box );
#line 2832 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{CLightSource  * pls  = GetLightSource  ();
#line 2833 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(pls  != NULL  && ! (pls  -> ls_ulFlags  & LSF_LENSFLAREONLY )){
#line 2835 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ASSERT  (! (pls  -> ls_ulFlags  & LSF_DIRECTIONAL ));
#line 2836 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
box  |= FLOATaabbox3D (FLOAT3D (0 , 0 , 0) , pls  -> ls_rFallOff );
#line 2837 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}}
#line 2839 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
box  . ExpandByFactor  (phy_fCollisionCacheAround  - 1.0f);
#line 2841 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
box  += en_plPlacement  . pl_PositionVector ;
#line 2842 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_boxMovingEstimate  = box ;
#line 2843 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
box  += en_vIntendedTranslation  * phy_fCollisionCacheAhead ;
#line 2844 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_boxMovingEstimate  |= box ;
#line 2847 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vAppliedTranslation  = FLOAT3D (0.0f , 0.0f , 0.0f);
#line 2848 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_mAppliedRotation  . Diagonal  (1.0f);
#line 2849 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  (CPhysicsProfile  :: PTI_PREMOVING );
#line 2851 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  void CMovableEntity::DoMoving(void) 
#line 2855 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 2856 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_pciCollisionInfo  == NULL  || (en_ulPhysicsFlags  & EPF_FORCEADDED )){
#line 2857 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return ;
#line 2858 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2861 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StartTimer  ((INDEX) CPhysicsProfile  :: PTI_DOMOVING );
#line 2862 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . IncrementTimerAveragingCounter  ((INDEX) CPhysicsProfile  :: PTI_DOMOVING );
#line 2864 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . IncrementCounter  ((INDEX) CPhysicsProfile  :: PCI_DOMOVING );
#line 2869 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_ulPhysicsFlags  & EPF_RT_SYNCHRONIZED ){
#line 2870 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . IncrementCounter  ((INDEX) CPhysicsProfile  :: PCI_DOMOVING_SYNC );
#line 2873 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vMoveTranslation  = en_vIntendedTranslation  - en_vAppliedTranslation ;
#line 2874 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_mMoveRotation  = en_mIntendedRotation  * ! en_mAppliedRotation ;
#line 2876 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
InitTryToMove  ();
#line 2877 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CMovableEntity  * penPusher  = NULL ;
#line 2878 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if((en_ulPhysicsFlags  & EPF_ONBLOCK_MASK ) == EPF_ONBLOCK_PUSH ){
#line 2879 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
penPusher  = this ;
#line 2880 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2881 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
TryToMove  (penPusher  , TRUE  , TRUE );
#line 2884 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 2885 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ASSERT  ((en_ulPhysicsFlags  & EPF_ONBLOCK_MASK ) != EPF_ONBLOCK_PUSH );
#line 2886 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . IncrementCounter  ((INDEX) CPhysicsProfile  :: PCI_DOMOVING_ASYNC );
#line 2889 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_penReference  == NULL ){
#line 2890 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . IncrementCounter  ((INDEX) CPhysicsProfile  :: PCI_DOMOVING_ASYNC_SYNCTRY );
#line 2893 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vMoveTranslation  = en_vIntendedTranslation  - en_vAppliedTranslation ;
#line 2894 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_mMoveRotation  = en_mIntendedRotation  * ! en_mAppliedRotation ;
#line 2895 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
InitTryToMove  ();
#line 2896 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_ctTryToMoveCheckCounter  = 4;
#line 2897 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
BOOL bMoveSuccessfull  = TryToMove  (NULL  , TRUE  , TRUE );
#line 2899 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(bMoveSuccessfull ){
#line 2901 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . IncrementCounter  ((INDEX) CPhysicsProfile  :: PCI_DOMOVING_ASYNC_SYNCPASS );
#line 2902 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_DOMOVING );
#line 2904 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return ;
#line 2905 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2906 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2908 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . IncrementCounter  ((INDEX) CPhysicsProfile  :: PCI_DOMOVING_ASYNC_TRANSLATE );
#line 2910 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vMoveTranslation  = en_vIntendedTranslation  - en_vAppliedTranslation ;
#line 2911 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
InitTryToMove  ();
#line 2912 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
TryToMove  (NULL  , TRUE  , FALSE );
#line 2915 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_mMoveRotation  = en_mIntendedRotation  * ! en_mAppliedRotation ;
#line 2916 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(
#line 2917 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_mMoveRotation  (1 , 1) != 1 || en_mMoveRotation  (1 , 2) != 0 || en_mMoveRotation  (1 , 3) != 0 || 
#line 2918 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_mMoveRotation  (2 , 1) != 0 || en_mMoveRotation  (2 , 2) != 1 || en_mMoveRotation  (2 , 3) != 0 || 
#line 2919 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_mMoveRotation  (3 , 1) != 0 || en_mMoveRotation  (3 , 2) != 0 || en_mMoveRotation  (3 , 3) != 1){
#line 2920 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . IncrementCounter  ((INDEX) CPhysicsProfile  :: PCI_DOMOVING_ASYNC_ROTATE );
#line 2921 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
InitTryToMove  ();
#line 2922 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
TryToMove  (NULL  , FALSE  , TRUE );
#line 2923 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2924 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2926 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_DOMOVING );
#line 2928 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  void CMovableEntity::PostMoving(void) 
#line 2932 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 2933 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_pciCollisionInfo  == NULL ){
#line 2935 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_ulFlags  |= ENF_INRENDERING ;
#line 2936 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return ;
#line 2937 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2939 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_ulPhysicsFlags  & EPF_FORCEADDED ){
#line 2940 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_ulPhysicsFlags  &= ~ EPF_FORCEADDED ;
#line 2941 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return ;
#line 2942 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2946 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StartTimer  ((INDEX) CPhysicsProfile  :: PTI_POSTMOVING );
#line 2947 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . IncrementTimerAveragingCounter  ((INDEX) CPhysicsProfile  :: PTI_POSTMOVING );
#line 2950 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_penReference  != NULL ){
#line 2951 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_penLastValidReference  = en_penReference ;
#line 2952 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2955 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vOldTranslation  = en_vCurrentTranslationAbsolute ;
#line 2956 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fTickQuantum  = _pTimer  -> TickQuantum ;
#line 2958 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vCurrentTranslationAbsolute  = en_vAppliedTranslation  / fTickQuantum ;
#line 2961 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(Abs  (en_vCurrentTranslationAbsolute  % en_vGravityDir ) > 0.1f){
#line 2962 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_tmLastSignificantVerticalMovement  = _pTimer  -> CurrentTick  ();
#line 2963 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2965 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
ClearNextPosition  ();
#line 2968 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT3D vSpeedDelta  = en_vIntendedTranslation  - en_vAppliedTranslation ;
#line 2969 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fSpeedDelta  = vSpeedDelta  . Length  () / fTickQuantum ;
#line 2972 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(fSpeedDelta  > en_fCollisionSpeedLimit  && 
#line 2973 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
! (en_ulPhysicsFlags  & EPF_NOIMPACTTHISTICK )){
#line 2975 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
FLOAT fDamage  = ((fSpeedDelta  - en_fCollisionSpeedLimit ) / en_fCollisionSpeedLimit ) * en_fCollisionDamageFactor ;
#line 2976 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
InflictDirectDamage  (this  , MiscDamageInflictor  () , DMT_IMPACT  , fDamage  , 
#line 2977 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_plPlacement  . pl_PositionVector  , - vSpeedDelta  . Normalize  ());
#line 2978 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 2979 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_ulPhysicsFlags  &= ~ EPF_NOIMPACTTHISTICK ;
#line 2982 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_vIntendedTranslation  = vOldTranslation ;
#line 2985 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_vCurrentTranslationAbsolute  . ManhattanNorm  () < 0.001f 
#line 2986 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
&& (en_vDesiredTranslationRelative  . ManhattanNorm  () == 0 || en_fAcceleration  == 0) 
#line 2987 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
&& en_aDesiredRotationRelative  . ManhattanNorm  () == 0){
#line 2990 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_penReference  != NULL ){
#line 2992 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_penReference  -> en_ulPhysicsFlags  & EPF_MOVABLE ){
#line 2993 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CMovableEntity  * penReference  = (CMovableEntity  *) (CEntity  *) en_penReference ;
#line 2995 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(! penReference  -> en_lnInMovers  . IsLinked  ()){
#line 2997 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_ulFlags  |= ENF_INRENDERING ;
#line 2998 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 3000 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 3002 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_ulFlags  |= ENF_INRENDERING ;
#line 3003 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 3006 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else {
#line 3008 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(
#line 3009 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
(! (en_ulPhysicsFlags  & (EPF_TRANSLATEDBYGRAVITY  | EPF_ORIENTEDBYGRAVITY )) 
#line 3010 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
|| en_fGravityA  == 0.0f)){
#line 3012 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_ulFlags  |= ENF_INRENDERING ;
#line 3013 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 3014 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 3017 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_ulFlags  & ENF_INRENDERING ){
#line 3019 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_plLastPlacement  = en_plPlacement ;
#line 3020 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 3021 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 3024 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(en_plpLastPositions  != NULL ){
#line 3025 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_plpLastPositions  -> AddPosition  (en_vNextPosition );
#line 3026 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 3030 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
extern  BOOL _bPredictionActive ;
#line 3031 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(_bPredictionActive  && (IsPredictable  () || IsPredictor  ())){
#line 3032 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CMovableEntity  * penTail  = (CMovableEntity  *) GetPredictedSafe  (this );
#line 3033 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
TIME  tmNow  = _pTimer  -> CurrentTick  ();
#line 3035 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(penTail  -> en_tmLastPredictionHead  < - 1){
#line 3036 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
penTail  -> en_vLastHead  = en_plPlacement  . pl_PositionVector ;
#line 3037 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
penTail  -> en_vPredError  = FLOAT3D (0 , 0 , 0);
#line 3038 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
penTail  -> en_vPredErrorLast  = FLOAT3D (0 , 0 , 0);
#line 3039 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 3042 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(IsPredictor  ()){
#line 3044 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(penTail  -> en_tmLastPredictionHead  == tmNow  || penTail  -> en_tmLastPredictionHead  < 0){
#line 3046 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
penTail  -> en_vPredErrorLast  = penTail  -> en_vPredError ;
#line 3047 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
penTail  -> en_vPredError  += 
#line 3048 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_plPlacement  . pl_PositionVector  - penTail  -> en_vLastHead ;
#line 3050 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
penTail  -> en_vLastHead  = en_plPlacement  . pl_PositionVector ;
#line 3052 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(IsPredictionHead  ()){
#line 3054 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
penTail  -> en_tmLastPredictionHead  = tmNow ;
#line 3055 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 3058 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else if(tmNow  > penTail  -> en_tmLastPredictionHead ){
#line 3060 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
penTail  -> en_vLastHead  = en_plPlacement  . pl_PositionVector ;
#line 3061 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
penTail  -> en_tmLastPredictionHead  = tmNow ;
#line 3062 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 3065 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}else if(! (en_ulFlags  & ENF_WILLBEPREDICTED )){
#line 3067 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(penTail  -> en_tmLastPredictionHead  > 0){
#line 3069 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
penTail  -> en_vPredErrorLast  = penTail  -> en_vPredError ;
#line 3070 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
penTail  -> en_vPredError  += 
#line 3071 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
en_plPlacement  . pl_PositionVector  - penTail  -> en_vLastHead ;
#line 3072 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 3074 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
penTail  -> en_vLastHead  = en_plPlacement  . pl_PositionVector ;
#line 3075 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
penTail  -> en_tmLastPredictionHead  = - 1;
#line 3076 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 3078 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
if(IsPredictionHead  ()){
#line 3080 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
penTail  -> en_vPredErrorLast  = penTail  -> en_vPredError ;
#line 3081 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
penTail  -> en_vPredError  *= cli_fPredictionFilter ;
#line 3086 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 3087 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
#line 3090 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
_pfPhysicsProfile  . StopTimer  ((INDEX) CPhysicsProfile  :: PTI_POSTMOVING );
#line 3093 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  void CMovableEntity::CacheNearPolygons(void) 
#line 3097 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 3098 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
CClipMove  cm  (this );
#line 3099 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
cm  . CacheNearPolygons  ();
#line 3100 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
  
#line 3104 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
SLONG CMovableEntity::GetUsedMemory(void) 
#line 3105 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
{
#line 3107 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
SLONG  slUsedMemory  = sizeof  (CMovableEntity ) - sizeof  (CRationalEntity ) + CRationalEntity  :: GetUsedMemory  ();
#line 3109 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
slUsedMemory  += en_apbpoNearPolygons  . sa_Count  * sizeof  (CBrushPolygon  *);
#line 3110 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
return slUsedMemory ;
#line 3111 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
}
BOOL CMovableEntity::
#line 3118 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/Engine/Classes/MovableEntity.es"
Dummy(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CMovableEntity_Dummy
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EVoid, "CMovableEntity::Dummy expects 'EVoid' as input!");  const EVoid &e = (const EVoid &)__eeInput; ASSERT(FALSE); return TRUE;};