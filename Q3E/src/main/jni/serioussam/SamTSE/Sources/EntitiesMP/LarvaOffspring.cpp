/*
 * This file is generated by Entity Class Compiler, (c) CroTeam 1997-98
 */

#line 17 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"

#include "EntitiesMP/StdH/StdH.h"

#include "EntitiesMP/EnemyBase.h"
#include "ModelsMP/Enemies/ExotechLarva/Projectile/TailProjectile.h"


#include <EntitiesMP/LarvaOffspring.h>
#include <EntitiesMP/LarvaOffspring_tables.h>
CEntityEvent *ELaunchLarvaOffspring::MakeCopy(void) { CEntityEvent *peeCopy = new ELaunchLarvaOffspring(*this); return peeCopy;}
ELaunchLarvaOffspring::ELaunchLarvaOffspring() : CEntityEvent(EVENTCODE_ELaunchLarvaOffspring) {;
 ClearToDefault(penLauncher);
};
#line 36 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"

#define ECF_OFFSPRING ( \
  ((ECBI_MODEL|ECBI_BRUSH|ECBI_PROJECTILE_MAGIC|ECBI_PROJECTILE_SOLID|ECBI_ITEM|ECBI_MODEL_HOLDER|ECBI_CORPSE_SOLID)<<ECB_TEST) |\
  ((ECBI_MODEL)<<ECB_IS) |\
  ((ECBI_MODEL)<<ECB_PASS) )

void CLarvaOffspring::SetDefaultProperties(void) {
  m_penLauncher = NULL;
  m_penTarget = NULL;
  m_fIgnoreTime = 0.0f;
  m_fFlyTime = 0.0f;
  m_fStartTime = 0.0f;
  m_fDamageAmount = 0.0f;
  m_fRangeDamageAmount = 0.0f;
  m_fDamageHotSpotRange = 0.0f;
  m_fDamageFallOffRange = 0.0f;
  m_fSoundRange = 0.0f;
  m_bExplode = FALSE ;
  m_aRotateSpeed = 0.0f;
  m_tmExpandBox = 0.0f;
  m_soEffect.SetOwner(this);
m_soEffect.Stop_internal();
  bLockedOn = TRUE ;
  m_penPrediction = NULL;
  CMovableModelEntity::SetDefaultProperties();
}
  
#line 78 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
void CLarvaOffspring::PreMoving(void) {
#line 79 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
if(m_tmExpandBox  > 0){
#line 80 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
if(_pTimer  -> CurrentTick  () > m_fStartTime  + m_tmExpandBox ){
#line 81 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
ChangeCollisionBoxIndexWhenPossible  (1);
#line 82 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
m_tmExpandBox  = 0;
#line 83 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}
#line 84 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}
#line 85 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
CMovableModelEntity  :: PreMoving  ();
#line 86 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}
  
#line 88 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
void CLarvaOffspring::Precache() 
#line 89 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
{
#line 90 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
PrecacheSound  (SOUND_LARVETTE );
#line 91 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
PrecacheModel  (MODEL_LARVA_TAIL );
#line 92 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
PrecacheTexture  (TEXTURE_LARVA_TAIL );
#line 93 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
PrecacheClass  (CLASS_BASIC_EFFECT  , BET_ROCKET );
#line 94 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
PrecacheClass  (CLASS_BASIC_EFFECT  , BET_SHOCKWAVE );
#line 95 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}
  
#line 97 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
void CLarvaOffspring::InitializeProjectile(void) {
#line 100 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
if(IsDerivedFromClass  (m_penLauncher  , "Enemy Base")){
#line 101 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
m_penTarget  = ((CEnemyBase  *) m_penLauncher  . ep_pen ) -> m_penEnemy ;
#line 102 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}
#line 104 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
InitAsModel  ();
#line 105 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
SetPhysicsFlags  (EPF_MODEL_SLIDING );
#line 106 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
SetCollisionFlags  (ECF_OFFSPRING );
#line 108 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
SetModel  (MODEL_LARVA_TAIL );
#line 109 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
SetModelMainTexture  (TEXTURE_LARVA_TAIL );
#line 110 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
GetModelObject  () -> StretchModel  (FLOAT3D (4.0f , 4.0f , 4.0f));
#line 112 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
ModelChangeNotify  ();
#line 114 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
m_soEffect  . Set3DParameters  (50.0f , 10.0f , 1.0f , 1.0f);
#line 115 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
PlaySound  (m_soEffect  , SOUND_LARVETTE  , SOF_3D  | SOF_LOOP );
#line 117 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
LaunchAsPropelledProjectile  (FLOAT3D (0.0f , 0.0f , - 30.0f) , (CMovableEntity  *) (CEntity  *) m_penLauncher );
#line 118 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
SetDesiredRotation  (ANGLE3D (0 , 0 , 0));
#line 119 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
m_fFlyTime  = 12.0f;
#line 120 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
m_fDamageAmount  = 10.0f;
#line 121 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
m_aRotateSpeed  = 275.0f;
#line 122 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
SetHealth  (10.0f);
#line 123 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}
  
#line 125 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
void CLarvaOffspring::LarvaTailExplosion(void) {
#line 126 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
ESpawnEffect  ese ;
#line 127 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
FLOAT3D vPoint ;
#line 128 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
FLOATplane3D vPlaneNormal ;
#line 129 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
FLOAT fDistanceToEdge ;
#line 132 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
ese  . colMuliplier  = C_WHITE  | CT_OPAQUE ;
#line 133 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
ese  . betType  = BET_ROCKET ;
#line 134 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
ese  . vStretch  = FLOAT3D (1 , 1 , 1);
#line 135 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
SpawnEffect  (GetPlacement  () , ese );
#line 137 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
if(IsDerivedFromClass  (m_penLauncher  , "Player")){
#line 138 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
SpawnRangeSound  (m_penLauncher  , this  , SNDT_PLAYER  , m_fSoundRange );
#line 139 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}
#line 142 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
ese  . betType  = BET_EXPLOSION_DEBRIS ;
#line 143 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
SpawnEffect  (GetPlacement  () , ese );
#line 146 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
ese  . betType  = BET_EXPLOSION_SMOKE ;
#line 147 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
SpawnEffect  (GetPlacement  () , ese );
#line 150 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
if(GetNearestPolygon  (vPoint  , vPlaneNormal  , fDistanceToEdge )){
#line 151 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
if((vPoint  - GetPlacement  () . pl_PositionVector ) . Length  () < 3.5f){
#line 153 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
ese  . betType  = BET_EXPLOSIONSTAIN ;
#line 154 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
ese  . vNormal  = FLOAT3D (vPlaneNormal );
#line 155 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
SpawnEffect  (CPlacement3D (vPoint  , ANGLE3D (0 , 0 , 0)) , ese );
#line 157 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
ese  . betType  = BET_SHOCKWAVE ;
#line 158 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
ese  . vNormal  = FLOAT3D (vPlaneNormal );
#line 159 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
SpawnEffect  (CPlacement3D (vPoint  , ANGLE3D (0 , 0 , 0)) , ese );
#line 161 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
ese  . betType  = BET_ROCKET_PLANE ;
#line 162 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
ese  . vNormal  = FLOAT3D (vPlaneNormal );
#line 163 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
SpawnEffect  (CPlacement3D (vPoint  + ese  . vNormal  / 50.0f , ANGLE3D (0 , 0 , 0)) , ese );
#line 164 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}
#line 165 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}
#line 166 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}
  
#line 173 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
void CLarvaOffspring::ProjectileTouch(CEntityPointer penHit) 
#line 174 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
{
#line 176 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
ProjectileHit  ();
#line 179 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
FLOAT3D vDirection ;
#line 180 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
FLOAT fTransLen  = en_vIntendedTranslation  . Length  ();
#line 181 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
if(fTransLen  > 0.5f)
#line 182 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
{
#line 183 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
vDirection  = en_vIntendedTranslation  / fTransLen ;
#line 184 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}
#line 185 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
else 
#line 186 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
{
#line 187 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
vDirection  = - en_vGravityDir ;
#line 188 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}
#line 190 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
const FLOAT fDamageMul  = GetSeriousDamageMultiplier  (m_penLauncher );
#line 192 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
InflictDirectDamage  (penHit  , m_penLauncher  , DMT_PROJECTILE  , m_fDamageAmount  * fDamageMul  , 
#line 193 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
GetPlacement  () . pl_PositionVector  , vDirection );
#line 195 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}
  
#line 198 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
void CLarvaOffspring::ProjectileHit(void) 
#line 199 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
{
#line 201 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
if(m_bExplode ){
#line 202 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
const FLOAT fDamageMul  = GetSeriousDamageMultiplier  (m_penLauncher );
#line 203 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
InflictRangeDamage  (m_penLauncher  , DMT_EXPLOSION  , m_fRangeDamageAmount  * fDamageMul  , 
#line 204 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
GetPlacement  () . pl_PositionVector  , m_fDamageHotSpotRange  , m_fDamageFallOffRange );
#line 205 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}
#line 207 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
if(m_fSoundRange  > 0.0f){
#line 208 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
ESound  eSound ;
#line 209 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
eSound  . EsndtSound  = SNDT_EXPLOSION ;
#line 210 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
eSound  . penTarget  = m_penLauncher ;
#line 211 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
SendEventInRange  (eSound  , FLOATaabbox3D (GetPlacement  () . pl_PositionVector  , m_fSoundRange ));
#line 212 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}
#line 213 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}
  
#line 217 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
void CLarvaOffspring::SpawnEffect(const CPlacement3D & plEffect,const ESpawnEffect & eSpawnEffect) {
#line 218 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
CEntityPointer penEffect  = CreateEntity  (plEffect  , CLASS_BASIC_EFFECT );
#line 219 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
penEffect  -> Initialize  (eSpawnEffect );
#line 220 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}
  
#line 224 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
ANGLE CLarvaOffspring::GetRotationSpeed(ANGLE aWantedAngle,ANGLE aRotateSpeed,FLOAT fWaitFrequency) 
#line 225 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
{
#line 226 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
ANGLE aResult ;
#line 228 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
if(aWantedAngle  < - aRotateSpeed  * fWaitFrequency )
#line 229 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
{
#line 231 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
aResult  = - aRotateSpeed ;
#line 232 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}
#line 234 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
else if(aWantedAngle  > aRotateSpeed  * fWaitFrequency )
#line 235 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
{
#line 237 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
aResult  = + aRotateSpeed ;
#line 238 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}
#line 240 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
else 
#line 241 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
{
#line 242 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
aResult  = aWantedAngle  / fWaitFrequency ;
#line 243 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}
#line 244 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
return aResult ;
#line 245 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}
BOOL CLarvaOffspring::
#line 252 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
LarvaOffspringGuidedSlide(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CLarvaOffspring_LarvaOffspringGuidedSlide
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EVoid, "CLarvaOffspring::LarvaOffspringGuidedSlide expects 'EVoid' as input!");  const EVoid &e = (const EVoid &)__eeInput;
#line 254 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
CEntity  * penObstacle ;
#line 255 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
if(CheckForCollisionNow  (0 , & penObstacle )){
#line 257 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
ProjectileTouch  (penObstacle );
#line 258 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
Return(STATE_CURRENT,EEnd  ());
#line 258 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
return TRUE;
#line 259 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}
#line 261 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
Jump(STATE_CURRENT,0x01610004, FALSE, EInternal());return TRUE;}BOOL CLarvaOffspring::H0x01610004_LarvaOffspringGuidedSlide_03(const CEntityEvent &__eeInput)
#line 262 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
{
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01610004
if(!(_pTimer  -> CurrentTick  () < (m_fStartTime  + m_fFlyTime ))){ Jump(STATE_CURRENT,0x01610005, FALSE, EInternal());return TRUE;}
#line 263 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
FLOAT fWaitFrequency  = 0.1f;
#line 264 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
if(m_penTarget  != NULL ){
#line 266 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
EntityInfo  * pei  = (EntityInfo  *) (m_penTarget  -> GetEntityInfo  ());
#line 267 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
FLOAT3D vDesiredPosition ;
#line 268 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
GetEntityInfoPosition  (m_penTarget  , pei  -> vSourceCenter  , vDesiredPosition );
#line 269 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
FLOAT3D vDesiredDirection  = (vDesiredPosition  - GetPlacement  () . pl_PositionVector ) . Normalize  ();
#line 271 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
ANGLE aWantedHeading  = GetRelativeHeading  (vDesiredDirection );
#line 272 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
ANGLE aHeading  = GetRotationSpeed  (aWantedHeading  , m_aRotateSpeed  , fWaitFrequency );
#line 275 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
FLOAT fSpeedDecreasingFactor  = ((180 - Abs  (aWantedHeading )) / 180.0f);
#line 277 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
FLOAT fSpeedIncreasingFactor  = (vDesiredPosition  - GetPlacement  () . pl_PositionVector ) . Length  () / 100;
#line 278 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
fSpeedIncreasingFactor  = ClampDn  (fSpeedIncreasingFactor  , 1.0f);
#line 280 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
FLOAT fMaxSpeed  = 30.0f * fSpeedIncreasingFactor ;
#line 281 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
FLOAT fMinSpeedRatio  = 0.5f;
#line 282 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
FLOAT fWantedSpeed  = fMaxSpeed  * (fMinSpeedRatio  + (1 - fMinSpeedRatio ) * fSpeedDecreasingFactor );
#line 284 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
SetDesiredTranslation  (FLOAT3D (0 , 0 , - fWantedSpeed ));
#line 287 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
m_aRotateSpeed  = 75.0f * (1 + 0.5f * fSpeedDecreasingFactor );
#line 290 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
FLOAT fDistanceFactor  = (vDesiredPosition  - GetPlacement  () . pl_PositionVector ) . Length  () / 50.0;
#line 291 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
fDistanceFactor  = ClampUp  (fDistanceFactor  , 4.0f);
#line 292 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
FLOAT fRNDHeading  = (FRnd  () - 0.5f) * 180 * fDistanceFactor ;
#line 295 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
if(Abs  (aWantedHeading ) < 30.0f)
#line 296 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
{
#line 298 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
SetDesiredRotation  (ANGLE3D (aHeading  + fRNDHeading  , 0 , 0));
#line 299 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}
#line 301 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
else 
#line 302 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
{
#line 303 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
SetDesiredRotation  (ANGLE3D (aHeading  , 0 , 0));
#line 304 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}
#line 305 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}
#line 307 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
SetTimerAfter(fWaitFrequency );
Jump(STATE_CURRENT, 0x01610002, FALSE, EBegin());return TRUE;}BOOL CLarvaOffspring::H0x01610002_LarvaOffspringGuidedSlide_01(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x01610002
switch(__eeInput.ee_slEvent)
#line 308 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
{case(EVENTCODE_EBegin):{const EBegin&e= (EBegin&)__eeInput;
return TRUE;}ASSERT(FALSE);break;case(EVENTCODE_EPass):{const EPass&epass= (EPass&)__eeInput;

#line 311 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
BOOL bHit ;
#line 313 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
bHit  = epass  . penOther  != m_penLauncher  || _pTimer  -> CurrentTick  () > m_fIgnoreTime ;
#line 315 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
bHit  &= ! IsOfClass  (epass  . penOther  , "LarvaOffspring");
#line 317 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
bHit  &= ! IsOfClass  (epass  . penOther  , "Twister");
#line 318 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
if(bHit ){
#line 319 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
ProjectileTouch  (epass  . penOther );
#line 320 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
Return(STATE_CURRENT,EEnd  ());
#line 320 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
return TRUE;
#line 321 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}
#line 322 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
return TRUE;
#line 323 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}ASSERT(FALSE);break;case(EVENTCODE_EDeath):
#line 325 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
{const EDeath&e= (EDeath&)__eeInput;

#line 326 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
ProjectileHit  ();
#line 327 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
Return(STATE_CURRENT,EEnd  ());
#line 327 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
return TRUE;
#line 328 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}ASSERT(FALSE);break;case(EVENTCODE_ETimer):
#line 330 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
{const ETimer&e= (ETimer&)__eeInput;

#line 331 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
UnsetTimer();Jump(STATE_CURRENT,0x01610003, FALSE, EInternal());return TRUE;
#line 332 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}ASSERT(FALSE);break;default: return FALSE; break;
#line 333 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}return TRUE;}BOOL CLarvaOffspring::H0x01610003_LarvaOffspringGuidedSlide_02(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01610003
Jump(STATE_CURRENT,0x01610004, FALSE, EInternal());return TRUE;
#line 334 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
}BOOL CLarvaOffspring::H0x01610005_LarvaOffspringGuidedSlide_04(const CEntityEvent &__eeInput) {
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01610005

#line 335 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
Return(STATE_CURRENT,EEnd  ());
#line 335 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
return TRUE; ASSERT(FALSE); return TRUE;};BOOL CLarvaOffspring::
#line 339 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
Main(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CLarvaOffspring_Main
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_ELaunchLarvaOffspring, "CLarvaOffspring::Main expects 'ELaunchLarvaOffspring' as input!");  const ELaunchLarvaOffspring &eLaunch = (const ELaunchLarvaOffspring &)__eeInput;
#line 341 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
ASSERT  (eLaunch  . penLauncher  != NULL );
#line 342 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
m_penLauncher  = eLaunch  . penLauncher ;
#line 343 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
SetPredictable  (TRUE );
#line 345 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
m_fIgnoreTime  = _pTimer  -> CurrentTick  () + 1.0f;
#line 347 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
InitializeProjectile  ();
#line 350 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
m_fStartTime  = _pTimer  -> CurrentTick  ();
#line 351 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
STATE_CLarvaOffspring_LarvaOffspringGuidedSlide, TRUE;
Jump(STATE_CURRENT, 0x01610006, FALSE, EBegin());return TRUE;}BOOL CLarvaOffspring::H0x01610006_Main_01(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x01610006
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: Call(STATE_CURRENT, STATE_CLarvaOffspring_LarvaOffspringGuidedSlide, TRUE, EVoid());return TRUE;case EVENTCODE_EEnd: Jump(STATE_CURRENT,0x01610007, FALSE, __eeInput); return TRUE;default: return FALSE; }}BOOL CLarvaOffspring::H0x01610007_Main_02(const CEntityEvent &__eeInput){
#undef STATE_CURRENT
#define STATE_CURRENT 0x01610007
const EEnd&__e= (EEnd&)__eeInput;
;
#line 353 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
LarvaTailExplosion  ();
#line 355 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
Destroy  ();
#line 357 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
Return(STATE_CURRENT,EVoid());
#line 357 "/data/data/com.termux/files/home/doom3/SeriousSamClassic-1.10.7/SamTSE/Sources/EntitiesMP/LarvaOffspring.es"
return TRUE; ASSERT(FALSE); return TRUE;};